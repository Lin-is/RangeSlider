!function(e){function t(t){for(var l,r,d=t[0],a=t[1],o=t[2],u=0,h=[];u<d.length;u++)r=d[u],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&h.push(n[r][0]),n[r]=0;for(l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l]);for(c&&c(t);h.length;)h.shift()();return s.push.apply(s,o||[]),i()}function i(){for(var e,t=0;t<s.length;t++){for(var i=s[t],l=!0,d=1;d<i.length;d++){var a=i[d];0!==n[a]&&(l=!1)}l&&(s.splice(t--,1),e=r(r.s=i[0]))}return e}var l={},n={0:0},s=[];function r(t){if(l[t])return l[t].exports;var i=l[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=l,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)r.d(i,l,function(t){return e[t]}.bind(null,l));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var d=window.webpackJsonp=window.webpackJsonp||[],a=d.push.bind(d);d.push=t,d=d.slice();for(var o=0;o<d.length;o++)t(d[o]);var c=a;s.push([0,1]),i()}([function(e,t,i){"use strict";i.r(t),function(e){i.d(t,"Observer",(function(){return n})),i.d(t,"Car",(function(){return l}));i(2);class l{go(e){return console.log(e),e}}class n{constructor(e){this.notify=function(t){e(t)}}}class s{constructor(e){this.sliderInfo={idNum:e.idNum,min:e.minScaleValue,max:e.maxScaleValue,step:e.step,handleNumber:e.handleNumber}}render(e,t=document.body){this.mainContainer=this.createElement("div","slider__mainContainer",e),t.append(this.mainContainer);let i=0,l=this.createElement("div","slider__controlElements",e),n=this.createElement("input","slider__valueCheckbox",e);n.setAttribute("type","checkbox"),n.setAttribute("checked","true");let s=this.createElement("label","slider__valueCheckboxLabel",e);s.setAttribute("for",""+n.id),s.innerHTML="Показать значение над ползунком";let r=this.createElement("div","slider__minMaxInputsContainer",e),d=this.createElement("div","slider__minInputLabel",e);d.innerHTML="Min:";let a=this.createElement("input","slider__minInput",e);a.setAttribute("type","text"),a.setAttribute("placeholder",""+this.sliderInfo.min),d.setAttribute("for",""+a.id);let o=this.createElement("div","slider__maxInputLabel",e);o.innerHTML="Max:";let c=this.createElement("input","slider__maxInput",e);c.setAttribute("type","text"),c.setAttribute("placeholder",""+this.sliderInfo.max),o.setAttribute("for",""+c.id);let u=this.createElement("div","slider__stepInputLabel",e);u.innerHTML="Шаг:";let h=this.createElement("input","slider__stepInput",e);h.setAttribute("type","text"),h.setAttribute("placeholder",""+this.sliderInfo.step),u.setAttribute("for",""+h.id);let m=this.createElement("div","slider__viewRadioContainer",e),p=this.createElement("label","slider__viewRadioCommonLabel",e);p.innerHTML="Вид слайдера:";let f=this.createElement("input","slider__viewRadio","horizontal-"+e);f.setAttribute("type","radio"),f.setAttribute("name","slider__viewRadio"+e),f.setAttribute("value","horizontal"),f.setAttribute("checked","true");let g=this.createElement("label","slider__viewRadioLabel",e);g.setAttribute("for",""+f.id),g.innerHTML="Горизонтальный";let v=this.createElement("input","slider__viewRadio","vertical-"+e);v.setAttribute("type","radio"),v.setAttribute("name","slider__viewRadio"+e),v.setAttribute("value","vertical");let b=this.createElement("label","slider__viewRadioLabel",e);b.setAttribute("for",""+v.id),b.innerHTML="Вертикальный";let _=this.createElement("button","slider__addHandleButton",e);_.setAttribute("type","button"),_.innerHTML="+";let E=this.createElement("button","slider__deleteAllHandlesButton",e);E.setAttribute("type","button"),E.innerHTML="- all",E.classList.add("hidden");let C=this.createElement("div","slider__handleControlContainer",e);this.mainContainer.append(l),l.append(n),l.append(s),l.append(r),r.append(d),r.append(a),r.append(o),r.append(c),l.append(u),l.append(h),l.append(m),m.append(p),m.append(f),m.append(g),m.append(v),m.append(b),l.append(_),l.append(E),l.append(C);let S=this.createElement("div","slider__container",e),y=this.createElement("div","slider__scale",e);this.mainContainer.append(S),S.append(y);let L=this;for(;i<this.sliderInfo.handleNumber;)this.addToggle(y,C),i++;n.addEventListener("change",(function(){n.checked?L.showToggleLables(e,!0):L.showToggleLables(e,!1)})),_.addEventListener("click",(function(e){e.preventDefault(),L.addToggle(y,C),E.classList.remove("hidden")})),E.addEventListener("click",(function(){L.deleteAllToggles(e),this.classList.add("hidden")})),v.addEventListener("change",(function(){this.checked&&L.rotateScaleVertical(S.id)})),f.addEventListener("change",(function(){f.checked&&L.rotateScaleHorisontal(S.id)}))}createElement(e,t,i){if(!e||!t)return;let l=document.createElement(e);return l.className=t,i&&(l.id=t+"-"+i),l}addToggle(t,i){let l=t.childElementCount+1,n=this.sliderInfo.idNum+"-"+l,s=this.createElement("div","slider__toggle",n),r=this.createElement("div","slider__toggleLabel",n),d=this;t.append(s),s.append(r);let a=this.createElement("div","slider__toggleControl",n);i.append(a);let o=this.createElement("lable","slider__toggleValueFieldLabel",n);o.innerHTML=l+": ";let c=this.createElement("input","slider__toggleValueField",n);if(c.setAttribute("type","text"),o.setAttribute("for",""+c.id),a.append(o),a.append(c),t.classList.contains("vertical")&&(s.classList.add("vertical"),r.classList.add("vertical")),+l>1){t.firstElementChild.firstElementChild.classList.contains("hidden")&&s.firstElementChild.classList.add("hidden");let i=this.createElement("button","slider__deleteToggleButton",n);i.setAttribute("type","button"),i.innerHTML="-",a.append(i),i.addEventListener("click",(function(){let t=e(this).attr("id"),[,i,l]=t.split("-");d.deleteToggle(i,+l)}))}c.addEventListener("change",(function(){d.chandeTogglePosition(this.value,t,s)})),this.addToggleDragAndDrop(t,s)}addToggleDragAndDrop(e,t){let i,l=t.parentElement.parentElement.previousElementSibling.lastElementChild.lastElementChild.firstChild.nextSibling,n=t.firstElementChild,s=0,r=this.sliderInfo.max-this.sliderInfo.min,d=this.sliderInfo.min,a=this.sliderInfo.step,o=1;t.addEventListener("mousedown",(function(c){c.preventDefault();let u=t.classList.contains("vertical"),h=r/a;function m(a){let c,h;u?(h=e.offsetHeight-t.offsetHeight,c=a.clientY-i-e.getBoundingClientRect().top):(c=a.clientX-i-e.getBoundingClientRect().left,h=e.getBoundingClientRect().width-t.getBoundingClientRect().width);let m=t.nextElementSibling,p=t.previousElementSibling;p&&(s=p.getBoundingClientRect().right-e.getBoundingClientRect().left,u&&(s=p.getBoundingClientRect().bottom-e.getBoundingClientRect().top)),m&&(h=m.getBoundingClientRect().left-e.getBoundingClientRect().left-m.getBoundingClientRect().width,u&&(h=m.getBoundingClientRect().top-e.getBoundingClientRect().top-m.getBoundingClientRect().height));let f,g=Math.round(c/o)*o;g<s&&(g=s),g>h&&(g=h),u?t.style.top=g+"px":t.style.left=g+"px",f=u?Math.round(g*r/(e.offsetHeight-t.offsetHeight)+d):Math.round(g*r/(e.offsetWidth-t.offsetWidth)+d),n.innerHTML=f+"",l.value=f+""}i=u?c.clientY-t.getBoundingClientRect().top:c.clientX-t.getBoundingClientRect().left,document.addEventListener("mousemove",m),document.addEventListener("mouseup",(function e(){document.removeEventListener("mouseup",e),document.removeEventListener("mousemove",m)})),o=Math.round((e.offsetWidth-t.offsetWidth)/h),u&&(o=(e.getBoundingClientRect().height-t.getBoundingClientRect().height)/h)})),t.addEventListener("ondragstart",(function(){return!1}))}deleteAllToggles(e){let t="#slider__scale-"+e;for(let i=document.querySelector(t).children.length;i>1;i--)this.deleteToggle(e,i,!0)}deleteToggle(e,t,i=!1){let l="#slider__handleControlContainer-"+e,n="#slider__scale-"+e;document.querySelector(n).children[t-1].remove(),document.querySelector(l).children[t-1].remove(),t<document.querySelector(n).children.length+1&&!i&&(this.changePostfixes(n,"slider__toggle",t),this.changePostfixes(l,"slider__toggleControl",t))}chandeTogglePosition(e,t,i){let l=t.offsetWidth,n=i.offsetWidth;i.classList.contains("vertical")&&(l=t.offsetHeight,n=i.offsetHeight);let s=(+e-this.sliderInfo.min)*(l-n)/(this.sliderInfo.max-this.sliderInfo.min);s>l-n/2&&(s=l-n/2,e=this.sliderInfo.max),s<0&&(s=0,e=this.sliderInfo.min),i.classList.contains("vertical")?i.style.top=s+"px":i.style.left=s+"px",i.firstElementChild.textContent=""+e}changePostfixes(e,t,i){let l=i-1,n=document.querySelector(e);for(let e=l;e<n.children.length;e++){let i=n.children[e],[,l,s]=i.id.split("-"),r=+s-1,d="#"+t+"-"+l+"-"+r;if(i.id=d,i.children.length>0)for(let e=0;e<i.children.length;e++){let[t,,]=i.children[e].id.split("-");if(d=t+"-"+l+"-"+r,i.children[e].id=d,"LABLE"===i.children[e].tagName){let t=i.children[e],n=t.getAttribute("for"),[s,,]=n.split("-");n=s+"-"+l+"-"+r,t.setAttribute("for",n),t.innerHTML=r+": "}}}}rotateScaleVertical(t){let i=t;if(t.includes("#")||(i="#"+t),!e(i).hasClass("vertical")){e(i).addClass("vertical"),e(i).children(".slider__scale").addClass("vertical");let t=e(i).children(".slider__scale").children(".slider__toggle");for(let e of t){e.classList.add("vertical");let t=e.style.left;e.style.left="-4px",e.style.top=t,e.firstElementChild.classList.add("vertical")}}}rotateScaleHorisontal(t){let i=t;if(t.includes("#")||(i="#"+t),e(i).hasClass("vertical")){e(i).removeClass("vertical"),e(i).children(".slider__scale").removeClass("vertical");let t=e(i).children(".slider__scale").children(".slider__toggle");for(let e of t){e.classList.remove("vertical");let t=e.style.top;e.style.top="-5px",e.style.left=t,e.firstElementChild.classList.remove("vertical")}}}showToggleLables(e,t){let i=document.querySelector("#slider__scale-"+e),l=Array.prototype.slice.call(i.children);for(let e of l)t?e.firstElementChild.classList.contains("hidden")&&e.firstElementChild.classList.remove("hidden"):e.firstElementChild.classList.contains("hidden")||e.firstElementChild.classList.add("hidden")}}const r=new class{constructor(){this.sliders=[{idNum:1,minScaleValue:0,maxScaleValue:100,step:10,handleNumber:1},{idNum:2,minScaleValue:-50,maxScaleValue:352,step:1,handleNumber:2},{idNum:3,minScaleValue:15,maxScaleValue:120,step:5,handleNumber:1}]}addSlider(e=0,t=100,i=1){let l={idNum:this.sliders.length>0?this.sliders[this.sliders.length-1].idNum+1:1,minScaleValue:e,maxScaleValue:t,step:i,handleNumber:1};this.sliders.push(l)}findSliderById(e){return this.sliders.find(t=>t.idNum==e)}getMinScaleValue(e){return this.findSliderById(e).minScaleValue}getMaxScaleValue(e){return+this.findSliderById(e).maxScaleValue}getStep(e){return+this.findSliderById(e).step}getHandleNumberValue(e){return+this.findSliderById(e).handleNumber}setMinScaleValue(e,t){this.findSliderById(e).minScaleValue=t}setMaxScaleValue(e,t){this.findSliderById(e).maxScaleValue=t}setStep(e,t){this.findSliderById(e).step=t}setHandleNumberValue(e,t){this.findSliderById(e).handleNumber=t}deleteSlider(){}};console.log(r);const d=new class extends class{constructor(){this.sendMessage=function(e){for(var t=0,i=this.observers.length;t<i;t++)this.observers[t].notify(e)},this.addObserver=function(e){this.observers.push(e)},this.observers=[]}}{constructor(e){super(),this.model=e,this.renderedSliders=[],console.log(this.renderedSliders)}displaySliders(e){for(let t of e){let e=new s(t);e.render(t.idNum);let i={idNum:+t.idNum,mainContainerFullId:"#"+e.mainContainer.id};this.renderedSliders.push(i)}this.createListeners()}clear(){for(let e of document.querySelectorAll(".slider__mainContainer"))e.remove()}createListeners(){for(let e of this.renderedSliders){let t=document.querySelector(e.mainContainerFullId),i=document.querySelector("#slider__minInput-"+e.idNum),l=document.querySelector("#slider__maxInput-"+e.idNum),n=document.querySelector("#slider__stepInput-"+e.idNum),s=this;i.addEventListener("change",(function(){let e=t.lastElementChild.firstElementChild.childElementCount,[,i]=this.id.split("-"),l={elemId:this.id,idNum:i,newValue:+this.value,handleNum:e};s.sendMessage(l)})),l.addEventListener("change",(function(){let e=t.lastElementChild.firstElementChild.childElementCount,[,i]=this.id.split("-"),l={elemId:this.id,idNum:i,newValue:+this.value,handleNum:e};s.sendMessage(l)})),n.addEventListener("change",(function(){let e=t.lastElementChild.firstElementChild.childElementCount,[,i]=this.id.split("-"),l={elemId:this.id,idNum:i,newValue:+this.value,handleNum:e};+this.value&&s.sendMessage(l)}))}}}(r);console.log(d);new class{constructor(e,t){this.changeMinValue=(e,t)=>{this.model.setMinScaleValue(e,t)},this.changeMaxValue=(e,t)=>{this.model.setMaxScaleValue(e,t)},this.changeStepValue=(e,t)=>{this.model.setStep(e,t)},this.changeHandleNumberValue=(e,t)=>{this.model.setHandleNumberValue(e,t)},this.model=e,this.view=t,this.view.displaySliders(this.model.sliders);let i=this;this.observer=new n((function(e){e.elemId.includes("minInput")?i.changeMinValue(e.idNum,e.newValue):e.elemId.includes("maxInput")?i.changeMaxValue(e.idNum,e.newValue):e.elemId.includes("stepInput")&&i.changeStepValue(e.idNum,e.newValue),+i.model.getHandleNumberValue(e.idNum)!=e.handleNum&&i.changeHandleNumberValue(e.idNum,e.handleNum),i.view.clear(),i.view.displaySliders(i.model.sliders)})),this.view.addObserver(this.observer)}}(r,d)}.call(this,i(1))},,function(e,t,i){var l=i(3),n=i(4);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);var s={insert:"head",singleton:!1},r=(l(n,s),n.locals?n.locals:{});e.exports=r},,function(e,t,i){}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LnRzIiwid2VicGFjazovLy8uL3NyYy9pbmRleC5jc3MiXSwibmFtZXMiOlsid2VicGFja0pzb25wQ2FsbGJhY2siLCJkYXRhIiwibW9kdWxlSWQiLCJjaHVua0lkIiwiY2h1bmtJZHMiLCJtb3JlTW9kdWxlcyIsImV4ZWN1dGVNb2R1bGVzIiwiaSIsInJlc29sdmVzIiwibGVuZ3RoIiwiT2JqZWN0IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiaW5zdGFsbGVkQ2h1bmtzIiwicHVzaCIsIm1vZHVsZXMiLCJwYXJlbnRKc29ucEZ1bmN0aW9uIiwic2hpZnQiLCJkZWZlcnJlZE1vZHVsZXMiLCJhcHBseSIsImNoZWNrRGVmZXJyZWRNb2R1bGVzIiwicmVzdWx0IiwiZGVmZXJyZWRNb2R1bGUiLCJmdWxmaWxsZWQiLCJqIiwiZGVwSWQiLCJzcGxpY2UiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwicyIsImluc3RhbGxlZE1vZHVsZXMiLCIwIiwiZXhwb3J0cyIsIm1vZHVsZSIsImwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicCIsImpzb25wQXJyYXkiLCJ3aW5kb3ciLCJvbGRKc29ucEZ1bmN0aW9uIiwic2xpY2UiLCJDYXIiLCJtc2ciLCJjb25zb2xlIiwibG9nIiwiT2JzZXJ2ZXIiLCJiZWhhdmlvciIsInRoaXMiLCJub3RpZnkiLCJTbGlkZXJJbnRlcmZhY2UiLCJzbGlkZXJJbmZvIiwiaWROdW0iLCJtaW4iLCJtaW5TY2FsZVZhbHVlIiwibWF4IiwibWF4U2NhbGVWYWx1ZSIsInN0ZXAiLCJoYW5kbGVOdW1iZXIiLCJwYXJlbnQiLCJkb2N1bWVudCIsImJvZHkiLCJtYWluQ29udGFpbmVyIiwiY3JlYXRlRWxlbWVudCIsImFwcGVuZCIsImhhbmRsZU51bSIsImNvbnRyb2xFbGVtZW50cyIsInZhbHVlQ2hlY2tib3giLCJzZXRBdHRyaWJ1dGUiLCJjaGVja2JveExhYmVsIiwiaWQiLCJpbm5lckhUTUwiLCJtaW5NYXhJbnB1dHNDb250YWluZXIiLCJtaW5JbnB1dExhYmVsIiwibWluSW5wdXQiLCJtYXhJbnB1dExhYmVsIiwibWF4SW5wdXQiLCJzdGVwSW5wdXRMYWJlbCIsInN0ZXBJbnB1dCIsInZpZXdSYWRpb0NvbnRhaW5lciIsInZpZXdSYWRpb0NvbW1vbkxhYmVsIiwidmlld1JhZGlvSG9yaXpvbnRhbCIsInZpZXdSYWRpb0hvcml6b250YWxMYWJlbCIsInZpZXdSYWRpb1ZlcnRpY2FsIiwidmlld1JhZGlvVmVydGljYWxMYWJlbCIsImFkZEhhbmRsZUJ1dHRvbiIsImRlbGV0ZUFsbEhhbmRsZXNCdXR0b24iLCJjbGFzc0xpc3QiLCJhZGQiLCJoYW5kbGVDb250cm9sQ29udGFpbmVyIiwibWFpbkRpdiIsInNsaWRlclNjYWxlIiwidGhhdCIsImFkZFRvZ2dsZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJjaGVja2VkIiwic2hvd1RvZ2dsZUxhYmxlcyIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInJlbW92ZSIsImRlbGV0ZUFsbFRvZ2dsZXMiLCJyb3RhdGVTY2FsZVZlcnRpY2FsIiwicm90YXRlU2NhbGVIb3Jpc29udGFsIiwidGFnIiwiY2xhc3NOYW1lIiwibmV3RWxlbSIsInNjYWxlIiwidG9nZ2xlQ29udHJvbENvbnRhaW5lciIsIm9yZGVyTnVtYmVyIiwiY2hpbGRFbGVtZW50Q291bnQiLCJpZFBvc3RmaXhGdWxsIiwidG9nZ2xlIiwic2xpZGVyVG9nZ2xlTGFiZWwiLCJ0b2dnbGVDb250cm9sIiwidG9nZ2xlVmFsdWVGaWVsZExhYmVsIiwidG9nZ2xlVmFsdWVGaWVsZCIsImNvbnRhaW5zIiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJkZWxldGVUb2dnbGVCdXR0b24iLCJidXRJZCIsIiQiLCJhdHRyIiwiaWROdW1iZXJCdXQiLCJwb3N0Zml4QnV0Iiwic3BsaXQiLCJkZWxldGVUb2dnbGUiLCJjaGFuZGVUb2dnbGVQb3NpdGlvbiIsImFkZFRvZ2dsZURyYWdBbmREcm9wIiwic2hpZnRYIiwidG9nZ2xlRmllbGQiLCJwYXJlbnRFbGVtZW50IiwicHJldmlvdXNFbGVtZW50U2libGluZyIsImxhc3RFbGVtZW50Q2hpbGQiLCJmaXJzdENoaWxkIiwibmV4dFNpYmxpbmciLCJ0b2dnbGVMYWJlbCIsInZhbHVlTWluIiwic3RlcFNpemUiLCJldmVudCIsImlzVmVydGljYWwiLCJzdGVwTnVtYmVyIiwib25Nb3VzZU1vdmUiLCJuZXdDb29yZCIsImZpbmlzaEVkZ2UiLCJvZmZzZXRIZWlnaHQiLCJjbGllbnRZIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwidG9wIiwiY2xpZW50WCIsImxlZnQiLCJ3aWR0aCIsIm5leHRFbGVtZW50U2libGluZyIsInByZXZTaWJsaW5nIiwicmlnaHQiLCJib3R0b20iLCJoZWlnaHQiLCJ2YWwiLCJmaW5Db29yZCIsIk1hdGgiLCJyb3VuZCIsInN0eWxlIiwib2Zmc2V0V2lkdGgiLCJvbk1vdXNlVXAiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiaWROdW1iZXIiLCJzbGlkZXJTY2FsZUlkIiwicXVlcnlTZWxlY3RvciIsImNoaWxkcmVuIiwicG9zdGZpeCIsImlzQWxsIiwiaGFuZGxlQ29udHJvbENvbnRhaW5lcklkIiwiY2hhbmdlUG9zdGZpeGVzIiwic2NhbGVTaXplIiwidG9nZ2xlU2l6ZSIsInRvZ2dsZU5ld1Bvc2l0aW9uIiwidGV4dENvbnRlbnQiLCJwYXJlbnRJZCIsImRlbGV0ZWRQb3N0Zml4IiwibmV3UG9zdGZpeCIsInRoaXNDaGlsZCIsInBvc3RmIiwibmV3UG9zdGYiLCJuZXdJZCIsImNoaWxkQ2xhc3NOYW1lIiwidGFnTmFtZSIsImxhYmxlRWxlbWVudCIsImF0dHJGb3IiLCJnZXRBdHRyaWJ1dGUiLCJmb3JDbGFzcyIsImNvbnRhaW5lcklkIiwic2VhcmNoQ29udGFpbmVySWQiLCJpbmNsdWRlcyIsImhhc0NsYXNzIiwiYWRkQ2xhc3MiLCJoYW5kbGVzIiwiaGFuZGxlIiwib2xkTGVmdCIsInJlbW92ZUNsYXNzIiwib2xkVG9wIiwiaXNUb1Nob3ciLCJwYXJlbnRTbGlkZXIiLCJBcnJheSIsIml0ZW0iLCJuZXdNb2RlbCIsInNsaWRlcnMiLCJzbGlkZXIiLCJmaW5kIiwiZmluZFNsaWRlckJ5SWQiLCJuZXdNaW4iLCJuZXdNYXgiLCJuZXdTdGVwIiwibmV3TnVtYmVyIiwibmV3VmlldyIsInNlbmRNZXNzYWdlIiwibGVuIiwib2JzZXJ2ZXJzIiwiYWRkT2JzZXJ2ZXIiLCJvYnNlcnZlciIsIm1vZGVsIiwic3VwZXIiLCJyZW5kZXJlZFNsaWRlcnMiLCJuZXdTbGlkZXIiLCJyZW5kZXIiLCJuZXdTbGlkZXJJbmZvIiwibWFpbkNvbnRhaW5lckZ1bGxJZCIsImNyZWF0ZUxpc3RlbmVycyIsImVsZW0iLCJxdWVyeVNlbGVjdG9yQWxsIiwiY29udGFpbmVyIiwidGhpc0lkTnVtIiwiaW5mbyIsImVsZW1JZCIsIm5ld1ZhbHVlIiwidmlldyIsImNoYW5nZU1pblZhbHVlIiwic2V0TWluU2NhbGVWYWx1ZSIsImNoYW5nZU1heFZhbHVlIiwic2V0TWF4U2NhbGVWYWx1ZSIsImNoYW5nZVN0ZXBWYWx1ZSIsInNldFN0ZXAiLCJjaGFuZ2VIYW5kbGVOdW1iZXJWYWx1ZSIsInNldEhhbmRsZU51bWJlclZhbHVlIiwiZGlzcGxheVNsaWRlcnMiLCJnZXRIYW5kbGVOdW1iZXJWYWx1ZSIsImNsZWFyIiwiYXBpIiwiY29udGVudCIsImRlZmF1bHQiLCJvcHRpb25zIiwiZXhwb3J0ZWQiLCJsb2NhbHMiXSwibWFwcGluZ3MiOiJhQUNFLFNBQVNBLEVBQXFCQyxHQVE3QixJQVBBLElBTUlDLEVBQVVDLEVBTlZDLEVBQVdILEVBQUssR0FD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TyxHIiwiZmlsZSI6ImFzc2V0cy9qcy9hcHAuMjQxZjJiYmVjNjhlYTU4MDIxZjUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBpbnN0YWxsIGEgSlNPTlAgY2FsbGJhY2sgZm9yIGNodW5rIGxvYWRpbmdcbiBcdGZ1bmN0aW9uIHdlYnBhY2tKc29ucENhbGxiYWNrKGRhdGEpIHtcbiBcdFx0dmFyIGNodW5rSWRzID0gZGF0YVswXTtcbiBcdFx0dmFyIG1vcmVNb2R1bGVzID0gZGF0YVsxXTtcbiBcdFx0dmFyIGV4ZWN1dGVNb2R1bGVzID0gZGF0YVsyXTtcblxuIFx0XHQvLyBhZGQgXCJtb3JlTW9kdWxlc1wiIHRvIHRoZSBtb2R1bGVzIG9iamVjdCxcbiBcdFx0Ly8gdGhlbiBmbGFnIGFsbCBcImNodW5rSWRzXCIgYXMgbG9hZGVkIGFuZCBmaXJlIGNhbGxiYWNrXG4gXHRcdHZhciBtb2R1bGVJZCwgY2h1bmtJZCwgaSA9IDAsIHJlc29sdmVzID0gW107XG4gXHRcdGZvcig7aSA8IGNodW5rSWRzLmxlbmd0aDsgaSsrKSB7XG4gXHRcdFx0Y2h1bmtJZCA9IGNodW5rSWRzW2ldO1xuIFx0XHRcdGlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChpbnN0YWxsZWRDaHVua3MsIGNodW5rSWQpICYmIGluc3RhbGxlZENodW5rc1tjaHVua0lkXSkge1xuIFx0XHRcdFx0cmVzb2x2ZXMucHVzaChpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF1bMF0pO1xuIFx0XHRcdH1cbiBcdFx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSAwO1xuIFx0XHR9XG4gXHRcdGZvcihtb2R1bGVJZCBpbiBtb3JlTW9kdWxlcykge1xuIFx0XHRcdGlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb3JlTW9kdWxlcywgbW9kdWxlSWQpKSB7XG4gXHRcdFx0XHRtb2R1bGVzW21vZHVsZUlkXSA9IG1vcmVNb2R1bGVzW21vZHVsZUlkXTtcbiBcdFx0XHR9XG4gXHRcdH1cbiBcdFx0aWYocGFyZW50SnNvbnBGdW5jdGlvbikgcGFyZW50SnNvbnBGdW5jdGlvbihkYXRhKTtcblxuIFx0XHR3aGlsZShyZXNvbHZlcy5sZW5ndGgpIHtcbiBcdFx0XHRyZXNvbHZlcy5zaGlmdCgpKCk7XG4gXHRcdH1cblxuIFx0XHQvLyBhZGQgZW50cnkgbW9kdWxlcyBmcm9tIGxvYWRlZCBjaHVuayB0byBkZWZlcnJlZCBsaXN0XG4gXHRcdGRlZmVycmVkTW9kdWxlcy5wdXNoLmFwcGx5KGRlZmVycmVkTW9kdWxlcywgZXhlY3V0ZU1vZHVsZXMgfHwgW10pO1xuXG4gXHRcdC8vIHJ1biBkZWZlcnJlZCBtb2R1bGVzIHdoZW4gYWxsIGNodW5rcyByZWFkeVxuIFx0XHRyZXR1cm4gY2hlY2tEZWZlcnJlZE1vZHVsZXMoKTtcbiBcdH07XG4gXHRmdW5jdGlvbiBjaGVja0RlZmVycmVkTW9kdWxlcygpIHtcbiBcdFx0dmFyIHJlc3VsdDtcbiBcdFx0Zm9yKHZhciBpID0gMDsgaSA8IGRlZmVycmVkTW9kdWxlcy5sZW5ndGg7IGkrKykge1xuIFx0XHRcdHZhciBkZWZlcnJlZE1vZHVsZSA9IGRlZmVycmVkTW9kdWxlc1tpXTtcbiBcdFx0XHR2YXIgZnVsZmlsbGVkID0gdHJ1ZTtcbiBcdFx0XHRmb3IodmFyIGogPSAxOyBqIDwgZGVmZXJyZWRNb2R1bGUubGVuZ3RoOyBqKyspIHtcbiBcdFx0XHRcdHZhciBkZXBJZCA9IGRlZmVycmVkTW9kdWxlW2pdO1xuIFx0XHRcdFx0aWYoaW5zdGFsbGVkQ2h1bmtzW2RlcElkXSAhPT0gMCkgZnVsZmlsbGVkID0gZmFsc2U7XG4gXHRcdFx0fVxuIFx0XHRcdGlmKGZ1bGZpbGxlZCkge1xuIFx0XHRcdFx0ZGVmZXJyZWRNb2R1bGVzLnNwbGljZShpLS0sIDEpO1xuIFx0XHRcdFx0cmVzdWx0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSBkZWZlcnJlZE1vZHVsZVswXSk7XG4gXHRcdFx0fVxuIFx0XHR9XG5cbiBcdFx0cmV0dXJuIHJlc3VsdDtcbiBcdH1cblxuIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gb2JqZWN0IHRvIHN0b3JlIGxvYWRlZCBhbmQgbG9hZGluZyBjaHVua3NcbiBcdC8vIHVuZGVmaW5lZCA9IGNodW5rIG5vdCBsb2FkZWQsIG51bGwgPSBjaHVuayBwcmVsb2FkZWQvcHJlZmV0Y2hlZFxuIFx0Ly8gUHJvbWlzZSA9IGNodW5rIGxvYWRpbmcsIDAgPSBjaHVuayBsb2FkZWRcbiBcdHZhciBpbnN0YWxsZWRDaHVua3MgPSB7XG4gXHRcdDA6IDBcbiBcdH07XG5cbiBcdHZhciBkZWZlcnJlZE1vZHVsZXMgPSBbXTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCIvXCI7XG5cbiBcdHZhciBqc29ucEFycmF5ID0gd2luZG93W1wid2VicGFja0pzb25wXCJdID0gd2luZG93W1wid2VicGFja0pzb25wXCJdIHx8IFtdO1xuIFx0dmFyIG9sZEpzb25wRnVuY3Rpb24gPSBqc29ucEFycmF5LnB1c2guYmluZChqc29ucEFycmF5KTtcbiBcdGpzb25wQXJyYXkucHVzaCA9IHdlYnBhY2tKc29ucENhbGxiYWNrO1xuIFx0anNvbnBBcnJheSA9IGpzb25wQXJyYXkuc2xpY2UoKTtcbiBcdGZvcih2YXIgaSA9IDA7IGkgPCBqc29ucEFycmF5Lmxlbmd0aDsgaSsrKSB3ZWJwYWNrSnNvbnBDYWxsYmFjayhqc29ucEFycmF5W2ldKTtcbiBcdHZhciBwYXJlbnRKc29ucEZ1bmN0aW9uID0gb2xkSnNvbnBGdW5jdGlvbjtcblxuXG4gXHQvLyBhZGQgZW50cnkgbW9kdWxlIHRvIGRlZmVycmVkIGxpc3RcbiBcdGRlZmVycmVkTW9kdWxlcy5wdXNoKFswLDFdKTtcbiBcdC8vIHJ1biBkZWZlcnJlZCBtb2R1bGVzIHdoZW4gcmVhZHlcbiBcdHJldHVybiBjaGVja0RlZmVycmVkTW9kdWxlcygpO1xuIiwiaW1wb3J0ICcuL2luZGV4LmNzcyc7XG5cInVzZSBzdHJpY3RcIjtcblxuXG5leHBvcnQgeyBPYnNlcnZlciB9O1xuXG5cbmNsYXNzIENhciB7XG4gIHB1YmxpYyBnbyhtc2c6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc29sZS5sb2cobXNnKTtcbiAgICByZXR1cm4gbXNnO1xuICB9XG59XG5cbmV4cG9ydCB7IENhciB9O1xuXG5cbmNsYXNzIE9ic2VydmFibGUge1xuICBvYnNlcnZlcnM6IGFueVtdO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMub2JzZXJ2ZXJzID0gW107XG4gIH0gIFxuICBzZW5kTWVzc2FnZSA9IGZ1bmN0aW9uIChtc2c6IGFueSkge1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSB0aGlzLm9ic2VydmVycy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgdGhpcy5vYnNlcnZlcnNbaV0ubm90aWZ5KG1zZyk7XG4gICAgfVxuICB9O1xuICBhZGRPYnNlcnZlciA9IGZ1bmN0aW9uIChvYnNlcnZlcjogYW55KSB7XG4gICAgdGhpcy5vYnNlcnZlcnMucHVzaChvYnNlcnZlcik7XG4gIH07XG59XG5cbmNsYXNzIE9ic2VydmVyIHtcbiAgbm90aWZ5OiBhbnk7XG4gIGNvbnN0cnVjdG9yKGJlaGF2aW9yOiBhbnkpIHtcbiAgICB0aGlzLm5vdGlmeSA9IGZ1bmN0aW9uIChtc2c6IGFueSkge1xuICAgICAgYmVoYXZpb3IobXNnKTtcbiAgICB9O1xuICB9XG59IFxuXG5jbGFzcyBNb2RlbCB7XG5cbiAgc2xpZGVyczogYW55W107XG4gIFxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnNsaWRlcnMgPSBbIHtpZE51bTogMSwgbWluU2NhbGVWYWx1ZTogMCwgbWF4U2NhbGVWYWx1ZTogMTAwLCBzdGVwOiAxMCwgaGFuZGxlTnVtYmVyOiAxfSxcbiAgICAgICAgICAgICAgICAgICAgIHtpZE51bTogMiwgbWluU2NhbGVWYWx1ZTogLTUwLCBtYXhTY2FsZVZhbHVlOiAzNTIsIHN0ZXA6IDEsIGhhbmRsZU51bWJlcjogMn0sXG4gICAgICAgICAgICAgICAgICAgICB7aWROdW06IDMsIG1pblNjYWxlVmFsdWU6IDE1LCBtYXhTY2FsZVZhbHVlOiAxMjAsIHN0ZXA6IDUsIGhhbmRsZU51bWJlcjogMX0sXTsgXG4gIH1cbiAgXG4gIGFkZFNsaWRlcihtaW46IG51bWJlciA9IDAsIG1heDogbnVtYmVyID0gMTAwLCBzdGVwOiBudW1iZXIgPSAxKSB7XG4gICAgbGV0IHNsaWRlciA9IHtcbiAgICAgIGlkTnVtOiB0aGlzLnNsaWRlcnMubGVuZ3RoID4gMCA/IHRoaXMuc2xpZGVyc1t0aGlzLnNsaWRlcnMubGVuZ3RoIC0gMV0uaWROdW0gKyAxIDogMSxcbiAgICAgIG1pblNjYWxlVmFsdWU6IG1pbixcbiAgICAgIG1heFNjYWxlVmFsdWU6IG1heCxcbiAgICAgIHN0ZXA6IHN0ZXAsXG4gICAgICBoYW5kbGVOdW1iZXI6IDEsXG4gICAgfVxuICAgIHRoaXMuc2xpZGVycy5wdXNoKHNsaWRlcik7XG4gIH07XG4gIGZpbmRTbGlkZXJCeUlkKGlkTnVtOiBudW1iZXIpIHtcbiAgICBsZXQgc2xpZGVyID0gdGhpcy5zbGlkZXJzLmZpbmQoaXRlbSA9PiBpdGVtLmlkTnVtID09IGlkTnVtKTtcbiAgICByZXR1cm4gc2xpZGVyO1xuICB9O1xuXG4gIGdldE1pblNjYWxlVmFsdWUoaWROdW06IG51bWJlcikge1xuICAgIHJldHVybiB0aGlzLmZpbmRTbGlkZXJCeUlkKGlkTnVtKS5taW5TY2FsZVZhbHVlO1xuICB9O1xuICBnZXRNYXhTY2FsZVZhbHVlKGlkTnVtOiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiArdGhpcy5maW5kU2xpZGVyQnlJZChpZE51bSkubWF4U2NhbGVWYWx1ZTtcbiAgfTtcbiAgZ2V0U3RlcChpZE51bTogbnVtYmVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gK3RoaXMuZmluZFNsaWRlckJ5SWQoaWROdW0pLnN0ZXA7XG4gIH07XG4gIGdldEhhbmRsZU51bWJlclZhbHVlKGlkTnVtOiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiArdGhpcy5maW5kU2xpZGVyQnlJZChpZE51bSkuaGFuZGxlTnVtYmVyO1xuICB9O1xuXG4gIHNldE1pblNjYWxlVmFsdWUoaWROdW06IG51bWJlciwgbmV3TWluOiBudW1iZXIpIHtcbiAgICB0aGlzLmZpbmRTbGlkZXJCeUlkKGlkTnVtKS5taW5TY2FsZVZhbHVlID0gbmV3TWluO1xuICB9XG4gIHNldE1heFNjYWxlVmFsdWUoaWROdW06IG51bWJlciwgbmV3TWF4OiBudW1iZXIpIHtcbiAgICB0aGlzLmZpbmRTbGlkZXJCeUlkKGlkTnVtKS5tYXhTY2FsZVZhbHVlID0gbmV3TWF4O1xuICB9XG4gIHNldFN0ZXAoaWROdW06IG51bWJlciwgbmV3U3RlcDogbnVtYmVyKSB7XG4gICAgdGhpcy5maW5kU2xpZGVyQnlJZChpZE51bSkuc3RlcCA9IG5ld1N0ZXA7XG4gIH1cbiAgc2V0SGFuZGxlTnVtYmVyVmFsdWUoaWROdW06IG51bWJlciwgbmV3TnVtYmVyOiBudW1iZXIpIHtcbiAgICB0aGlzLmZpbmRTbGlkZXJCeUlkKGlkTnVtKS5oYW5kbGVOdW1iZXIgPSBuZXdOdW1iZXI7XG4gIH1cbiAgZGVsZXRlU2xpZGVyKCkge31cbn1cblxuY2xhc3MgQ29udHJvbGxlciB7XG4gIG1vZGVsOiBhbnk7XG4gIHZpZXc6IGFueTtcbiAgbm90aWZ5OiBhbnk7XG4gIG9ic2VydmVyOiBhbnk7XG5cbiAgY29uc3RydWN0b3IobW9kZWw6IGFueSwgdmlldzogYW55KSB7XG4gICAgdGhpcy5tb2RlbCA9IG1vZGVsO1xuICAgIHRoaXMudmlldyA9IHZpZXc7XG4gICAgdGhpcy52aWV3LmRpc3BsYXlTbGlkZXJzKHRoaXMubW9kZWwuc2xpZGVycyk7XG5cbiAgICBsZXQgdGhhdCA9IHRoaXM7XG5cbiAgICB0aGlzLm9ic2VydmVyID0gbmV3IE9ic2VydmVyKGZ1bmN0aW9uIChpbmZvOiBhbnkpIHtcbiAgICAgIGlmIChpbmZvLmVsZW1JZC5pbmNsdWRlcygnbWluSW5wdXQnKSkge1xuICAgICAgICB0aGF0LmNoYW5nZU1pblZhbHVlKGluZm8uaWROdW0sIGluZm8ubmV3VmFsdWUpO1xuICAgICAgfSBlbHNlIGlmIChpbmZvLmVsZW1JZC5pbmNsdWRlcygnbWF4SW5wdXQnKSkge1xuICAgICAgICB0aGF0LmNoYW5nZU1heFZhbHVlKGluZm8uaWROdW0sIGluZm8ubmV3VmFsdWUpO1xuICAgICAgfSBlbHNlIGlmIChpbmZvLmVsZW1JZC5pbmNsdWRlcygnc3RlcElucHV0JykpIHtcbiAgICAgICAgdGhhdC5jaGFuZ2VTdGVwVmFsdWUoaW5mby5pZE51bSwgaW5mby5uZXdWYWx1ZSk7XG4gICAgICB9XG4gICAgICBsZXQgdG9nZ2xlVmFsdWUgPSArdGhhdC5tb2RlbC5nZXRIYW5kbGVOdW1iZXJWYWx1ZShpbmZvLmlkTnVtKTtcbiAgICAgIGlmICh0b2dnbGVWYWx1ZSAhPSBpbmZvLmhhbmRsZU51bSkge1xuICAgICAgICB0aGF0LmNoYW5nZUhhbmRsZU51bWJlclZhbHVlKGluZm8uaWROdW0sIGluZm8uaGFuZGxlTnVtKTtcbiAgICAgIH1cbiAgICAgIHRoYXQudmlldy5jbGVhcigpO1xuICAgICAgdGhhdC52aWV3LmRpc3BsYXlTbGlkZXJzKHRoYXQubW9kZWwuc2xpZGVycyk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnZpZXcuYWRkT2JzZXJ2ZXIodGhpcy5vYnNlcnZlcik7XG4gIH1cblxuICBjaGFuZ2VNaW5WYWx1ZSA9IChpZE51bTogbnVtYmVyLCBuZXdWYWx1ZTogbnVtYmVyKSA9PiB7XG4gICAgdGhpcy5tb2RlbC5zZXRNaW5TY2FsZVZhbHVlKGlkTnVtLCBuZXdWYWx1ZSk7XG4gIH1cbiAgY2hhbmdlTWF4VmFsdWUgPSAoaWROdW06IG51bWJlciwgbmV3VmFsdWU6IG51bWJlcikgPT4ge1xuICAgIHRoaXMubW9kZWwuc2V0TWF4U2NhbGVWYWx1ZShpZE51bSwgbmV3VmFsdWUpO1xuICB9XG4gIGNoYW5nZVN0ZXBWYWx1ZSA9IChpZE51bTogbnVtYmVyLCBuZXdWYWx1ZTogbnVtYmVyKSA9PiB7XG4gICAgdGhpcy5tb2RlbC5zZXRTdGVwKGlkTnVtLCBuZXdWYWx1ZSk7XG4gIH1cbiAgY2hhbmdlSGFuZGxlTnVtYmVyVmFsdWUgPSAoaWROdW06IG51bWJlciwgbmV3VmFsdWU6IG51bWJlcikgPT4ge1xuICAgIHRoaXMubW9kZWwuc2V0SGFuZGxlTnVtYmVyVmFsdWUoaWROdW0sIG5ld1ZhbHVlKTtcbiAgfVxufVxuXG5jbGFzcyBWaWV3IGV4dGVuZHMgT2JzZXJ2YWJsZSB7XG4gIG1vZGVsOiBhbnk7XG4gIHJlbmRlcmVkU2xpZGVyczogQXJyYXk8e1xuICAgIGlkTnVtOiBudW1iZXIsXG4gICAgbWFpbkNvbnRhaW5lckZ1bGxJZDogc3RyaW5nXG4gIH0+O1xuXG4gIGNvbnN0cnVjdG9yKG1vZGVsOiBhbnkpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMubW9kZWwgPSBtb2RlbDtcbiAgICB0aGlzLnJlbmRlcmVkU2xpZGVycyA9IFtdO1xuICAgIGNvbnNvbGUubG9nKHRoaXMucmVuZGVyZWRTbGlkZXJzKTtcbiAgfVxuXG4gIGRpc3BsYXlTbGlkZXJzKHNsaWRlcnM6IGFueSkge1xuICAgIGZvciAobGV0IHNsaWRlciBvZiBzbGlkZXJzKSB7XG4gICAgICBsZXQgbmV3U2xpZGVyID0gbmV3IFNsaWRlckludGVyZmFjZShzbGlkZXIpO1xuICAgICAgbmV3U2xpZGVyLnJlbmRlcihzbGlkZXIuaWROdW0pO1xuXG4gICAgICBsZXQgbmV3U2xpZGVySW5mbyA9IHtcbiAgICAgICAgaWROdW06ICtzbGlkZXIuaWROdW0sIFxuICAgICAgICBtYWluQ29udGFpbmVyRnVsbElkOiBcIiNcIiArIG5ld1NsaWRlci5tYWluQ29udGFpbmVyLmlkXG4gICAgICB9XG4gICAgICB0aGlzLnJlbmRlcmVkU2xpZGVycy5wdXNoKG5ld1NsaWRlckluZm8pO1xuICAgIH1cbiAgICB0aGlzLmNyZWF0ZUxpc3RlbmVycygpO1xuICB9XG5cbiAgY2xlYXIgKCkge1xuICAgIGZvciAobGV0IGVsZW0gb2YgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNsaWRlcl9fbWFpbkNvbnRhaW5lcicpKSB7XG4gICAgICBlbGVtLnJlbW92ZSgpO1xuICAgIH1cbiAgfVxuXG4gIGNyZWF0ZUxpc3RlbmVycygpIHtcbiAgICBmb3IgKGxldCBzbGlkZXIgb2YgdGhpcy5yZW5kZXJlZFNsaWRlcnMpIHtcbiAgICAgIFxuICAgICAgbGV0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2xpZGVyLm1haW5Db250YWluZXJGdWxsSWQpO1xuICAgICAgbGV0IG1pbklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNzbGlkZXJfX21pbklucHV0LVwiICsgc2xpZGVyLmlkTnVtKTtcbiAgICAgIGxldCBtYXhJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjc2xpZGVyX19tYXhJbnB1dC1cIiArIHNsaWRlci5pZE51bSk7XG4gICAgICBsZXQgc3RlcElucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNzbGlkZXJfX3N0ZXBJbnB1dC1cIiArIHNsaWRlci5pZE51bSk7XG5cbiAgICAgIGxldCB0aGF0ID0gdGhpcztcblxuICAgICAgbWluSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGxldCB0aGlzSFRNTCA9IHRoaXMgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICAgICAgbGV0IGhhbmRsZU51bSA9IGNvbnRhaW5lci5sYXN0RWxlbWVudENoaWxkLmZpcnN0RWxlbWVudENoaWxkLmNoaWxkRWxlbWVudENvdW50O1xuICAgICAgICBsZXQgWywgdGhpc0lkTnVtXSA9IHRoaXNIVE1MLmlkLnNwbGl0KCctJyk7XG4gICAgICAgIGxldCBpbmZvID0ge1xuICAgICAgICAgIGVsZW1JZDogdGhpc0hUTUwuaWQsXG4gICAgICAgICAgaWROdW06IHRoaXNJZE51bSxcbiAgICAgICAgICBuZXdWYWx1ZTogK3RoaXNIVE1MLnZhbHVlLFxuICAgICAgICAgIGhhbmRsZU51bTogaGFuZGxlTnVtLFxuICAgICAgICB9XG4gICAgICAgIHRoYXQuc2VuZE1lc3NhZ2UoaW5mbyk7XG4gICAgICB9KTtcblxuICAgICAgbWF4SW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGxldCB0aGlzSFRNTCA9IHRoaXMgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICAgICAgbGV0IGhhbmRsZU51bSA9IGNvbnRhaW5lci5sYXN0RWxlbWVudENoaWxkLmZpcnN0RWxlbWVudENoaWxkLmNoaWxkRWxlbWVudENvdW50O1xuICAgICAgICBsZXQgWywgdGhpc0lkTnVtXSA9IHRoaXNIVE1MLmlkLnNwbGl0KCctJyk7XG4gICAgICAgIGxldCBpbmZvID0ge1xuICAgICAgICAgIGVsZW1JZDogdGhpc0hUTUwuaWQsXG4gICAgICAgICAgaWROdW06IHRoaXNJZE51bSxcbiAgICAgICAgICBuZXdWYWx1ZTogK3RoaXNIVE1MLnZhbHVlLFxuICAgICAgICAgIGhhbmRsZU51bTogaGFuZGxlTnVtLFxuICAgICAgICB9XG4gICAgICAgIHRoYXQuc2VuZE1lc3NhZ2UoaW5mbyk7XG4gICAgICB9KTtcblxuICAgICAgc3RlcElucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICBsZXQgdGhpc0hUTUwgPSB0aGlzIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgICAgIGxldCBoYW5kbGVOdW0gPSBjb250YWluZXIubGFzdEVsZW1lbnRDaGlsZC5maXJzdEVsZW1lbnRDaGlsZC5jaGlsZEVsZW1lbnRDb3VudDtcbiAgICAgICAgbGV0IFssIHRoaXNJZE51bV0gPSB0aGlzSFRNTC5pZC5zcGxpdCgnLScpO1xuICAgICAgICBsZXQgaW5mbyA9IHtcbiAgICAgICAgICBlbGVtSWQ6IHRoaXNIVE1MLmlkLFxuICAgICAgICAgIGlkTnVtOiB0aGlzSWROdW0sXG4gICAgICAgICAgbmV3VmFsdWU6ICt0aGlzSFRNTC52YWx1ZSxcbiAgICAgICAgICBoYW5kbGVOdW06IGhhbmRsZU51bSxcbiAgICAgICAgfVxuICAgICAgICBpZiAoK3RoaXNIVE1MLnZhbHVlKSB7XG4gICAgICAgICAgdGhhdC5zZW5kTWVzc2FnZShpbmZvKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG59XG5cbmNsYXNzIFNsaWRlckludGVyZmFjZSB7XG4gIG1haW5Db250YWluZXI6IEVsZW1lbnQ7XG4gIHNsaWRlckluZm86IHtcbiAgICBpZE51bTogbnVtYmVyLFxuICAgIG1pbjogbnVtYmVyLFxuICAgIG1heDogbnVtYmVyLFxuICAgIHN0ZXA6IG51bWJlcixcbiAgICBoYW5kbGVOdW1iZXI6IG51bWJlclxuICB9O1xuXG4gIGNvbnN0cnVjdG9yKHNsaWRlckluZm86IGFueSkge1xuICAgIHRoaXMuc2xpZGVySW5mbyA9IHtcbiAgICAgIGlkTnVtOiBzbGlkZXJJbmZvLmlkTnVtLFxuICAgICAgbWluOiBzbGlkZXJJbmZvLm1pblNjYWxlVmFsdWUsXG4gICAgICBtYXg6IHNsaWRlckluZm8ubWF4U2NhbGVWYWx1ZSxcbiAgICAgIHN0ZXA6IHNsaWRlckluZm8uc3RlcCxcbiAgICAgIGhhbmRsZU51bWJlcjogc2xpZGVySW5mby5oYW5kbGVOdW1iZXJcbiAgICB9O1xuICB9XG5cbiAgcmVuZGVyKGlkTnVtOiBudW1iZXIsIHBhcmVudDogRWxlbWVudCB8IEhUTUxFbGVtZW50ID0gZG9jdW1lbnQuYm9keSk6IHZvaWQge1xuICAgIHRoaXMubWFpbkNvbnRhaW5lciA9IHRoaXMuY3JlYXRlRWxlbWVudChcImRpdlwiLCBcInNsaWRlcl9fbWFpbkNvbnRhaW5lclwiLCBpZE51bSk7XG4gICAgcGFyZW50LmFwcGVuZCh0aGlzLm1haW5Db250YWluZXIpO1xuICAgIGxldCBoYW5kbGVOdW0gPSAwO1xuXG4gICAgbGV0IGNvbnRyb2xFbGVtZW50cyA9IHRoaXMuY3JlYXRlRWxlbWVudChcImRpdlwiLCBcInNsaWRlcl9fY29udHJvbEVsZW1lbnRzXCIsIGlkTnVtKTtcblxuICAgIGxldCB2YWx1ZUNoZWNrYm94ID0gdGhpcy5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiwgXCJzbGlkZXJfX3ZhbHVlQ2hlY2tib3hcIiwgaWROdW0pO1xuICAgIHZhbHVlQ2hlY2tib3guc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcImNoZWNrYm94XCIpO1xuICAgIHZhbHVlQ2hlY2tib3guc2V0QXR0cmlidXRlKFwiY2hlY2tlZFwiLCBcInRydWVcIik7XG4gICAgbGV0IGNoZWNrYm94TGFiZWwgPSB0aGlzLmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiLCBcInNsaWRlcl9fdmFsdWVDaGVja2JveExhYmVsXCIsIGlkTnVtKTtcbiAgICBjaGVja2JveExhYmVsLnNldEF0dHJpYnV0ZSgnZm9yJywgJycgKyB2YWx1ZUNoZWNrYm94LmlkKTtcbiAgICBjaGVja2JveExhYmVsLmlubmVySFRNTCA9IFwi0J/QvtC60LDQt9Cw0YLRjCDQt9C90LDRh9C10L3QuNC1INC90LDQtCDQv9C+0LvQt9GD0L3QutC+0LxcIjtcblxuICAgIGxldCBtaW5NYXhJbnB1dHNDb250YWluZXIgPSB0aGlzLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJzbGlkZXJfX21pbk1heElucHV0c0NvbnRhaW5lclwiLCBpZE51bSk7XG5cbiAgICBsZXQgbWluSW5wdXRMYWJlbCA9IHRoaXMuY3JlYXRlRWxlbWVudChcImRpdlwiLCBcInNsaWRlcl9fbWluSW5wdXRMYWJlbFwiLCBpZE51bSk7XG4gICAgbWluSW5wdXRMYWJlbC5pbm5lckhUTUwgPSBcIk1pbjpcIjtcbiAgICBsZXQgbWluSW5wdXQgPSB0aGlzLmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiLCBcInNsaWRlcl9fbWluSW5wdXRcIiwgaWROdW0pO1xuICAgIG1pbklucHV0LnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJ0ZXh0XCIpO1xuICAgIG1pbklucHV0LnNldEF0dHJpYnV0ZShcInBsYWNlaG9sZGVyXCIsIFwiXCIgKyB0aGlzLnNsaWRlckluZm8ubWluKTtcbiAgICBtaW5JbnB1dExhYmVsLnNldEF0dHJpYnV0ZShcImZvclwiLCBcIlwiICsgbWluSW5wdXQuaWQpO1xuXG5cbiAgICBsZXQgbWF4SW5wdXRMYWJlbCA9IHRoaXMuY3JlYXRlRWxlbWVudChcImRpdlwiLCBcInNsaWRlcl9fbWF4SW5wdXRMYWJlbFwiLCBpZE51bSk7XG4gICAgbWF4SW5wdXRMYWJlbC5pbm5lckhUTUwgPSBcIk1heDpcIjtcbiAgICBsZXQgbWF4SW5wdXQgPSB0aGlzLmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiLCBcInNsaWRlcl9fbWF4SW5wdXRcIiwgaWROdW0pO1xuICAgIG1heElucHV0LnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJ0ZXh0XCIpO1xuICAgIG1heElucHV0LnNldEF0dHJpYnV0ZShcInBsYWNlaG9sZGVyXCIsIFwiXCIgKyB0aGlzLnNsaWRlckluZm8ubWF4KTtcbiAgICBtYXhJbnB1dExhYmVsLnNldEF0dHJpYnV0ZShcImZvclwiLCBcIlwiICsgbWF4SW5wdXQuaWQpO1xuXG5cbiAgICBsZXQgc3RlcElucHV0TGFiZWwgPSB0aGlzLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJzbGlkZXJfX3N0ZXBJbnB1dExhYmVsXCIsIGlkTnVtKTtcbiAgICBzdGVwSW5wdXRMYWJlbC5pbm5lckhUTUwgPSBcItCo0LDQszpcIjtcbiAgICBsZXQgc3RlcElucHV0ID0gdGhpcy5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiwgXCJzbGlkZXJfX3N0ZXBJbnB1dFwiLCBpZE51bSk7XG4gICAgc3RlcElucHV0LnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJ0ZXh0XCIpO1xuICAgIHN0ZXBJbnB1dC5zZXRBdHRyaWJ1dGUoXCJwbGFjZWhvbGRlclwiLCBcIlwiICsgdGhpcy5zbGlkZXJJbmZvLnN0ZXApO1xuICAgIHN0ZXBJbnB1dExhYmVsLnNldEF0dHJpYnV0ZShcImZvclwiLCBcIlwiICsgc3RlcElucHV0LmlkKTtcblxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAgdmlldyByYWRpb2J1dHRvbnMgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gICAgbGV0IHZpZXdSYWRpb0NvbnRhaW5lciA9IHRoaXMuY3JlYXRlRWxlbWVudChcImRpdlwiLCBcInNsaWRlcl9fdmlld1JhZGlvQ29udGFpbmVyXCIsIGlkTnVtKTtcbiAgICBsZXQgdmlld1JhZGlvQ29tbW9uTGFiZWwgPSB0aGlzLmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiLCBcInNsaWRlcl9fdmlld1JhZGlvQ29tbW9uTGFiZWxcIiwgaWROdW0pO1xuICAgIHZpZXdSYWRpb0NvbW1vbkxhYmVsLmlubmVySFRNTCA9IFwi0JLQuNC0INGB0LvQsNC50LTQtdGA0LA6XCI7XG5cbiAgICBsZXQgdmlld1JhZGlvSG9yaXpvbnRhbCA9IHRoaXMuY3JlYXRlRWxlbWVudChcImlucHV0XCIsIFwic2xpZGVyX192aWV3UmFkaW9cIiwgXCJob3Jpem9udGFsLVwiICsgaWROdW0pO1xuICAgIHZpZXdSYWRpb0hvcml6b250YWwuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcInJhZGlvXCIpO1xuICAgIHZpZXdSYWRpb0hvcml6b250YWwuc2V0QXR0cmlidXRlKFwibmFtZVwiLCBcInNsaWRlcl9fdmlld1JhZGlvXCIgKyBpZE51bSk7XG4gICAgdmlld1JhZGlvSG9yaXpvbnRhbC5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLCBcImhvcml6b250YWxcIik7XG4gICAgdmlld1JhZGlvSG9yaXpvbnRhbC5zZXRBdHRyaWJ1dGUoXCJjaGVja2VkXCIsIFwidHJ1ZVwiKTtcblxuICAgIGxldCB2aWV3UmFkaW9Ib3Jpem9udGFsTGFiZWwgPSB0aGlzLmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiLCBcInNsaWRlcl9fdmlld1JhZGlvTGFiZWxcIiwgaWROdW0pO1xuICAgIHZpZXdSYWRpb0hvcml6b250YWxMYWJlbC5zZXRBdHRyaWJ1dGUoXCJmb3JcIiwgXCJcIiArIHZpZXdSYWRpb0hvcml6b250YWwuaWQpO1xuICAgIHZpZXdSYWRpb0hvcml6b250YWxMYWJlbC5pbm5lckhUTUwgPSBcItCT0L7RgNC40LfQvtC90YLQsNC70YzQvdGL0LlcIjtcblxuICAgIGxldCB2aWV3UmFkaW9WZXJ0aWNhbCA9IHRoaXMuY3JlYXRlRWxlbWVudChcImlucHV0XCIsIFwic2xpZGVyX192aWV3UmFkaW9cIiwgXCJ2ZXJ0aWNhbC1cIiArIGlkTnVtKTtcbiAgICB2aWV3UmFkaW9WZXJ0aWNhbC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwicmFkaW9cIik7XG4gICAgdmlld1JhZGlvVmVydGljYWwuc2V0QXR0cmlidXRlKFwibmFtZVwiLCBcInNsaWRlcl9fdmlld1JhZGlvXCIgKyBpZE51bSk7XG4gICAgdmlld1JhZGlvVmVydGljYWwuc2V0QXR0cmlidXRlKFwidmFsdWVcIiwgXCJ2ZXJ0aWNhbFwiKTtcblxuXG4gICAgbGV0IHZpZXdSYWRpb1ZlcnRpY2FsTGFiZWwgPSB0aGlzLmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiLCBcInNsaWRlcl9fdmlld1JhZGlvTGFiZWxcIiwgaWROdW0pO1xuICAgIHZpZXdSYWRpb1ZlcnRpY2FsTGFiZWwuc2V0QXR0cmlidXRlKFwiZm9yXCIsIFwiXCIgKyB2aWV3UmFkaW9WZXJ0aWNhbC5pZCk7XG4gICAgdmlld1JhZGlvVmVydGljYWxMYWJlbC5pbm5lckhUTUwgPSBcItCS0LXRgNGC0LjQutCw0LvRjNC90YvQuVwiO1xuXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gICAgbGV0IGFkZEhhbmRsZUJ1dHRvbiA9IHRoaXMuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCBcInNsaWRlcl9fYWRkSGFuZGxlQnV0dG9uXCIsIGlkTnVtKTtcbiAgICBhZGRIYW5kbGVCdXR0b24uc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcImJ1dHRvblwiKTtcbiAgICBhZGRIYW5kbGVCdXR0b24uaW5uZXJIVE1MID0gXCIrXCI7XG5cbiAgICBsZXQgZGVsZXRlQWxsSGFuZGxlc0J1dHRvbiA9IHRoaXMuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCBcInNsaWRlcl9fZGVsZXRlQWxsSGFuZGxlc0J1dHRvblwiLCBpZE51bSk7XG4gICAgZGVsZXRlQWxsSGFuZGxlc0J1dHRvbi5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwiYnV0dG9uXCIpO1xuICAgIGRlbGV0ZUFsbEhhbmRsZXNCdXR0b24uaW5uZXJIVE1MID0gXCItIGFsbFwiO1xuICAgIGRlbGV0ZUFsbEhhbmRsZXNCdXR0b24uY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG5cbiAgICBsZXQgaGFuZGxlQ29udHJvbENvbnRhaW5lciA9IHRoaXMuY3JlYXRlRWxlbWVudChcImRpdlwiLCBcInNsaWRlcl9faGFuZGxlQ29udHJvbENvbnRhaW5lclwiLCBpZE51bSk7XG5cbiAgICB0aGlzLm1haW5Db250YWluZXIuYXBwZW5kKGNvbnRyb2xFbGVtZW50cyk7XG4gICAgY29udHJvbEVsZW1lbnRzLmFwcGVuZCh2YWx1ZUNoZWNrYm94KTtcbiAgICBjb250cm9sRWxlbWVudHMuYXBwZW5kKGNoZWNrYm94TGFiZWwpO1xuXG4gICAgY29udHJvbEVsZW1lbnRzLmFwcGVuZChtaW5NYXhJbnB1dHNDb250YWluZXIpO1xuICAgIG1pbk1heElucHV0c0NvbnRhaW5lci5hcHBlbmQobWluSW5wdXRMYWJlbCk7XG4gICAgbWluTWF4SW5wdXRzQ29udGFpbmVyLmFwcGVuZChtaW5JbnB1dCk7XG4gICAgbWluTWF4SW5wdXRzQ29udGFpbmVyLmFwcGVuZChtYXhJbnB1dExhYmVsKTtcbiAgICBtaW5NYXhJbnB1dHNDb250YWluZXIuYXBwZW5kKG1heElucHV0KTtcblxuICAgIGNvbnRyb2xFbGVtZW50cy5hcHBlbmQoc3RlcElucHV0TGFiZWwpO1xuICAgIGNvbnRyb2xFbGVtZW50cy5hcHBlbmQoc3RlcElucHV0KTtcblxuICAgIGNvbnRyb2xFbGVtZW50cy5hcHBlbmQodmlld1JhZGlvQ29udGFpbmVyKTtcbiAgICB2aWV3UmFkaW9Db250YWluZXIuYXBwZW5kKHZpZXdSYWRpb0NvbW1vbkxhYmVsKTtcbiAgICB2aWV3UmFkaW9Db250YWluZXIuYXBwZW5kKHZpZXdSYWRpb0hvcml6b250YWwpO1xuICAgIHZpZXdSYWRpb0NvbnRhaW5lci5hcHBlbmQodmlld1JhZGlvSG9yaXpvbnRhbExhYmVsKTtcbiAgICB2aWV3UmFkaW9Db250YWluZXIuYXBwZW5kKHZpZXdSYWRpb1ZlcnRpY2FsKTtcbiAgICB2aWV3UmFkaW9Db250YWluZXIuYXBwZW5kKHZpZXdSYWRpb1ZlcnRpY2FsTGFiZWwpO1xuXG4gICAgY29udHJvbEVsZW1lbnRzLmFwcGVuZChhZGRIYW5kbGVCdXR0b24pO1xuICAgIGNvbnRyb2xFbGVtZW50cy5hcHBlbmQoZGVsZXRlQWxsSGFuZGxlc0J1dHRvbik7XG4gICAgY29udHJvbEVsZW1lbnRzLmFwcGVuZChoYW5kbGVDb250cm9sQ29udGFpbmVyKTtcblxuICAgIGxldCBtYWluRGl2ID0gdGhpcy5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwic2xpZGVyX19jb250YWluZXJcIiwgaWROdW0pO1xuICAgIGxldCBzbGlkZXJTY2FsZSA9IHRoaXMuY3JlYXRlRWxlbWVudChcImRpdlwiLCBcInNsaWRlcl9fc2NhbGVcIiwgaWROdW0pO1xuXG4gICAgdGhpcy5tYWluQ29udGFpbmVyLmFwcGVuZChtYWluRGl2KTtcbiAgICBtYWluRGl2LmFwcGVuZChzbGlkZXJTY2FsZSk7XG5cbiAgICBsZXQgdGhhdCA9IHRoaXM7XG5cbiAgICB3aGlsZSAoaGFuZGxlTnVtIDwgdGhpcy5zbGlkZXJJbmZvLmhhbmRsZU51bWJlcikge1xuICAgICAgdGhpcy5hZGRUb2dnbGUoc2xpZGVyU2NhbGUsIGhhbmRsZUNvbnRyb2xDb250YWluZXIpO1xuICAgICAgaGFuZGxlTnVtKys7XG4gICAgfVxuXG4gICAgdmFsdWVDaGVja2JveC5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICgodmFsdWVDaGVja2JveCBhcyBIVE1MSW5wdXRFbGVtZW50KS5jaGVja2VkKSB7XG4gICAgICAgIHRoYXQuc2hvd1RvZ2dsZUxhYmxlcyhpZE51bSwgdHJ1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGF0LnNob3dUb2dnbGVMYWJsZXMoaWROdW0sIGZhbHNlKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGFkZEhhbmRsZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oZTogTW91c2VFdmVudCkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhhdC5hZGRUb2dnbGUoc2xpZGVyU2NhbGUsIGhhbmRsZUNvbnRyb2xDb250YWluZXIpO1xuICAgICAgZGVsZXRlQWxsSGFuZGxlc0J1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpO1xuICAgIH0pO1xuXG4gICAgZGVsZXRlQWxsSGFuZGxlc0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgdGhhdC5kZWxldGVBbGxUb2dnbGVzKGlkTnVtKTtcbiAgICAgIHRoaXMuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgfSk7XG5cbiAgICB2aWV3UmFkaW9WZXJ0aWNhbC5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICgodGhpcyBhcyBIVE1MSW5wdXRFbGVtZW50KS5jaGVja2VkICkge1xuICAgICAgICB0aGF0LnJvdGF0ZVNjYWxlVmVydGljYWwobWFpbkRpdi5pZCk7XG4gICAgICB9IFxuICAgIH0pO1xuXG4gICAgdmlld1JhZGlvSG9yaXpvbnRhbC5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICgodmlld1JhZGlvSG9yaXpvbnRhbCBhcyBIVE1MSW5wdXRFbGVtZW50KS5jaGVja2VkKSB7XG4gICAgICAgIHRoYXQucm90YXRlU2NhbGVIb3Jpc29udGFsKG1haW5EaXYuaWQpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgXG4gIH07XG4gIGNyZWF0ZUVsZW1lbnQodGFnOiBzdHJpbmcsIGNsYXNzTmFtZTogc3RyaW5nLCBpZE51bTogbnVtYmVyIHwgc3RyaW5nKTogRWxlbWVudCB7XG4gICAgaWYgKCF0YWcgfHwgIWNsYXNzTmFtZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBsZXQgbmV3RWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnKTtcbiAgICBuZXdFbGVtLmNsYXNzTmFtZSA9IGNsYXNzTmFtZTtcblxuICAgIGlmIChpZE51bSkge1xuICAgICAgbmV3RWxlbS5pZCA9IGNsYXNzTmFtZSArICctJyArIGlkTnVtO1xuICAgIH1cbiAgICByZXR1cm4gbmV3RWxlbTtcbiAgfTtcblxuICBhZGRUb2dnbGUoc2NhbGU6IEVsZW1lbnQsIHRvZ2dsZUNvbnRyb2xDb250YWluZXI6IEVsZW1lbnQpOiB2b2lkIHtcbiAgICBsZXQgb3JkZXJOdW1iZXIgPSBzY2FsZS5jaGlsZEVsZW1lbnRDb3VudCArIDE7XG4gICAgbGV0IGlkUG9zdGZpeEZ1bGwgPSB0aGlzLnNsaWRlckluZm8uaWROdW0gKyAnLScgKyAob3JkZXJOdW1iZXIpO1xuICAgIGxldCB0b2dnbGUgPSB0aGlzLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJzbGlkZXJfX3RvZ2dsZVwiLCBpZFBvc3RmaXhGdWxsKTtcbiAgICBsZXQgc2xpZGVyVG9nZ2xlTGFiZWwgPSB0aGlzLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJzbGlkZXJfX3RvZ2dsZUxhYmVsXCIsIGlkUG9zdGZpeEZ1bGwpO1xuICAgIGxldCB0aGF0ID0gdGhpcztcblxuICAgIHNjYWxlLmFwcGVuZCh0b2dnbGUpO1xuICAgIHRvZ2dsZS5hcHBlbmQoc2xpZGVyVG9nZ2xlTGFiZWwpO1xuXG4gICAgbGV0IHRvZ2dsZUNvbnRyb2wgPSB0aGlzLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJzbGlkZXJfX3RvZ2dsZUNvbnRyb2xcIiwgaWRQb3N0Zml4RnVsbCk7XG4gICAgdG9nZ2xlQ29udHJvbENvbnRhaW5lci5hcHBlbmQodG9nZ2xlQ29udHJvbCk7XG5cbiAgICBsZXQgdG9nZ2xlVmFsdWVGaWVsZExhYmVsID0gdGhpcy5jcmVhdGVFbGVtZW50KFwibGFibGVcIiwgXCJzbGlkZXJfX3RvZ2dsZVZhbHVlRmllbGRMYWJlbFwiLCBpZFBvc3RmaXhGdWxsKTtcbiAgICB0b2dnbGVWYWx1ZUZpZWxkTGFiZWwuaW5uZXJIVE1MID0gb3JkZXJOdW1iZXIgKyBcIjogXCI7XG5cbiAgICBsZXQgdG9nZ2xlVmFsdWVGaWVsZCA9IHRoaXMuY3JlYXRlRWxlbWVudChcImlucHV0XCIsIFwic2xpZGVyX190b2dnbGVWYWx1ZUZpZWxkXCIsIGlkUG9zdGZpeEZ1bGwpO1xuICAgIHRvZ2dsZVZhbHVlRmllbGQuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcInRleHRcIik7XG4gICAgdG9nZ2xlVmFsdWVGaWVsZExhYmVsLnNldEF0dHJpYnV0ZSgnZm9yJywgJycgKyB0b2dnbGVWYWx1ZUZpZWxkLmlkKTtcblxuICAgIHRvZ2dsZUNvbnRyb2wuYXBwZW5kKHRvZ2dsZVZhbHVlRmllbGRMYWJlbCk7XG4gICAgdG9nZ2xlQ29udHJvbC5hcHBlbmQodG9nZ2xlVmFsdWVGaWVsZCk7XG5cbiAgICBpZiAoc2NhbGUuY2xhc3NMaXN0LmNvbnRhaW5zKFwidmVydGljYWxcIikpe1xuICAgICAgdG9nZ2xlLmNsYXNzTGlzdC5hZGQoXCJ2ZXJ0aWNhbFwiKTtcbiAgICAgIHNsaWRlclRvZ2dsZUxhYmVsLmNsYXNzTGlzdC5hZGQoXCJ2ZXJ0aWNhbFwiKTtcbiAgICB9IFxuICBcbiAgICBpZiAoK29yZGVyTnVtYmVyID4gMSkgIHtcbiAgICAgIGlmIChzY2FsZS5maXJzdEVsZW1lbnRDaGlsZC5maXJzdEVsZW1lbnRDaGlsZC5jbGFzc0xpc3QuY29udGFpbnMoXCJoaWRkZW5cIikpIHtcbiAgICAgICAgdG9nZ2xlLmZpcnN0RWxlbWVudENoaWxkLmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIik7XG4gICAgICB9XG4gICAgICBsZXQgZGVsZXRlVG9nZ2xlQnV0dG9uID0gdGhpcy5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIFwic2xpZGVyX19kZWxldGVUb2dnbGVCdXR0b25cIiwgaWRQb3N0Zml4RnVsbCk7XG4gICAgICBkZWxldGVUb2dnbGVCdXR0b24uc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcImJ1dHRvblwiKTtcbiAgICAgIGRlbGV0ZVRvZ2dsZUJ1dHRvbi5pbm5lckhUTUwgPSBcIi1cIjtcbiAgICAgIHRvZ2dsZUNvbnRyb2wuYXBwZW5kKGRlbGV0ZVRvZ2dsZUJ1dHRvbik7XG5cbiAgICAgIGRlbGV0ZVRvZ2dsZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgIGZ1bmN0aW9uKCkge1xuICAgICAgICBsZXQgYnV0SWQgPSAkKHRoaXMpLmF0dHIoXCJpZFwiKTtcbiAgICAgICAgbGV0IFsgLCBpZE51bWJlckJ1dCwgcG9zdGZpeEJ1dF0gPSBidXRJZC5zcGxpdChcIi1cIik7XG4gICAgICAgIHRoYXQuZGVsZXRlVG9nZ2xlKGlkTnVtYmVyQnV0LCArcG9zdGZpeEJ1dCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB0b2dnbGVWYWx1ZUZpZWxkLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgdGhhdC5jaGFuZGVUb2dnbGVQb3NpdGlvbih0aGlzLnZhbHVlLCAoc2NhbGUgYXMgSFRNTEVsZW1lbnQpLCAodG9nZ2xlIGFzIEhUTUxFbGVtZW50KSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmFkZFRvZ2dsZURyYWdBbmREcm9wKChzY2FsZSBhcyBIVE1MRWxlbWVudCksICh0b2dnbGUgYXMgSFRNTEVsZW1lbnQpKTtcbiAgfTtcbiAgYWRkVG9nZ2xlRHJhZ0FuZERyb3AgKHNjYWxlOiBIVE1MRWxlbWVudCwgdG9nZ2xlOiBIVE1MRWxlbWVudCkge1xuICAgIGxldCB0b2dnbGVGaWVsZCA9IHRvZ2dsZS5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucHJldmlvdXNFbGVtZW50U2libGluZy5sYXN0RWxlbWVudENoaWxkLmxhc3RFbGVtZW50Q2hpbGQuZmlyc3RDaGlsZC5uZXh0U2libGluZyBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgIGxldCB0b2dnbGVMYWJlbCA9IHRvZ2dsZS5maXJzdEVsZW1lbnRDaGlsZDtcbiAgICBsZXQgbWluID0gMCxcbiAgICAgICAgbWF4ID0gdGhpcy5zbGlkZXJJbmZvLm1heCAtIHRoaXMuc2xpZGVySW5mby5taW4sXG4gICAgICAgIHZhbHVlTWluID0gdGhpcy5zbGlkZXJJbmZvLm1pbixcbiAgICAgICAgc3RlcCA9IHRoaXMuc2xpZGVySW5mby5zdGVwLFxuICAgICAgICBzdGVwU2l6ZSA9IDEsXG4gICAgICAgIHNoaWZ0WDogbnVtYmVyO1xuXG4gICAgdG9nZ2xlLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGZ1bmN0aW9uIChldmVudDogTW91c2VFdmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsgXG5cbiAgICAgIGxldCBpc1ZlcnRpY2FsID0gdG9nZ2xlLmNsYXNzTGlzdC5jb250YWlucyhcInZlcnRpY2FsXCIpO1xuICAgICAgbGV0IHN0ZXBOdW1iZXIgPSBtYXggLyBzdGVwO1xuXG4gICAgICBpZiAoaXNWZXJ0aWNhbCkge1xuICAgICAgICAgIHNoaWZ0WCA9IGV2ZW50LmNsaWVudFkgLSB0b2dnbGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzaGlmdFggPSBldmVudC5jbGllbnRYIC0gdG9nZ2xlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQ7XG4gICAgICB9XG5cbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIG9uTW91c2VNb3ZlKTtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBvbk1vdXNlVXApO1xuXG4gICAgICBzdGVwU2l6ZSA9IE1hdGgucm91bmQoKHNjYWxlLm9mZnNldFdpZHRoIC0gdG9nZ2xlLm9mZnNldFdpZHRoKSAvIHN0ZXBOdW1iZXIpO1xuICAgICAgaWYgKGlzVmVydGljYWwpIHtcbiAgICAgICAgc3RlcFNpemUgPSAoc2NhbGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0IC0gdG9nZ2xlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodCkgLyBzdGVwTnVtYmVyO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBvbk1vdXNlTW92ZShldmVudDogTW91c2VFdmVudCkge1xuICAgICAgICAgIGxldCBuZXdDb29yZDogbnVtYmVyLCBmaW5pc2hFZGdlOiBudW1iZXI7XG5cbiAgICAgICAgICBpZiAoaXNWZXJ0aWNhbCkge1xuICAgICAgICAgICAgZmluaXNoRWRnZSA9IHNjYWxlLm9mZnNldEhlaWdodCAtIHRvZ2dsZS5vZmZzZXRIZWlnaHQ7XG4gICAgICAgICAgICBuZXdDb29yZCA9IGV2ZW50LmNsaWVudFkgLSBzaGlmdFggLSBzY2FsZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3A7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5ld0Nvb3JkID0gZXZlbnQuY2xpZW50WCAtIHNoaWZ0WCAtIHNjYWxlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQ7XG4gICAgICAgICAgICBmaW5pc2hFZGdlID0gc2NhbGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGggLSB0b2dnbGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbGV0IG5leHRTaWJsaW5nID0gdG9nZ2xlLm5leHRFbGVtZW50U2libGluZztcbiAgICAgICAgICBsZXQgcHJldlNpYmxpbmcgPSB0b2dnbGUucHJldmlvdXNFbGVtZW50U2libGluZztcblxuICAgICAgICAgIGlmIChwcmV2U2libGluZykge1xuICAgICAgICAgICAgbWluID0gcHJldlNpYmxpbmcuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkucmlnaHQgLSBzY2FsZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0O1xuICAgICAgICAgICAgaWYgKGlzVmVydGljYWwpIHtcbiAgICAgICAgICAgICAgbWluID0gcHJldlNpYmxpbmcuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuYm90dG9tIC0gc2NhbGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAobmV4dFNpYmxpbmcpIHtcbiAgICAgICAgICAgICAgZmluaXNoRWRnZSA9IG5leHRTaWJsaW5nLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQgLSBzY2FsZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0IC0gbmV4dFNpYmxpbmcuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7XG4gICAgICAgICAgICBpZiAoaXNWZXJ0aWNhbCkge1xuICAgICAgICAgICAgICBmaW5pc2hFZGdlID0gbmV4dFNpYmxpbmcuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wIC0gc2NhbGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wIC0gbmV4dFNpYmxpbmcuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICBsZXQgZmluQ29vcmQgPSBNYXRoLnJvdW5kKG5ld0Nvb3JkIC8gc3RlcFNpemUpICogc3RlcFNpemU7XG5cbiAgICAgICAgICAgIGlmIChmaW5Db29yZCA8IG1pbikge1xuICAgICAgICAgICAgICAgIGZpbkNvb3JkID0gbWluO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZmluQ29vcmQgPiBmaW5pc2hFZGdlKSB7XG4gICAgICAgICAgICAgIGZpbkNvb3JkID0gZmluaXNoRWRnZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGlzVmVydGljYWwpIHtcbiAgICAgICAgICAgICAgICB0b2dnbGUuc3R5bGUudG9wID0gZmluQ29vcmQgKyAncHgnO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0b2dnbGUuc3R5bGUubGVmdCA9IGZpbkNvb3JkICsgJ3B4JztcbiAgICAgICAgICAgIH1cblxuICAvLy0tLS0tLS0tICDRgNCw0YHRh9C10YIg0YfQuNGB0LvQsCDQvdCw0LQg0L/QvtC70LfRg9C90LrQvtC8ICAtLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgICAgIC8vISDRiNC60LDQu9CwINGA0LDQsdC+0YLQsNC10YIg0L3QtdC/0YDQsNCy0LjQu9GM0L3QvlxuXG4gICAgICAgICAgICBsZXQgdmFsOiBudW1iZXI7XG5cbiAgICAgICAgICAgIGlmIChpc1ZlcnRpY2FsKSB7XG4gICAgICAgICAgICAgIHZhbCA9IE1hdGgucm91bmQoKChmaW5Db29yZCAqIG1heCkgLyAoc2NhbGUub2Zmc2V0SGVpZ2h0IC0gdG9nZ2xlLm9mZnNldEhlaWdodCkpICsgdmFsdWVNaW4pOyAgXG4gICAgICAgICAgICB9IGVsc2UgeyBcbiAgICAgICAgICAgICAgdmFsID0gTWF0aC5yb3VuZCgoKGZpbkNvb3JkICogbWF4KSAvIChzY2FsZS5vZmZzZXRXaWR0aCAtIHRvZ2dsZS5vZmZzZXRXaWR0aCkpICsgdmFsdWVNaW4pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIHRvZ2dsZUxhYmVsLmlubmVySFRNTCA9IHZhbCArIFwiXCI7XG4gICAgICAgIHRvZ2dsZUZpZWxkLnZhbHVlID0gdmFsICsgXCJcIjtcbiAgICAgIH07XG4gICAgICBmdW5jdGlvbiBvbk1vdXNlVXAoKSB7XG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBvbk1vdXNlVXApO1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBvbk1vdXNlTW92ZSk7XG4gICAgICB9O1xuICAgIH0pO1xuXG4gICAgdG9nZ2xlLmFkZEV2ZW50TGlzdGVuZXIoXCJvbmRyYWdzdGFydFwiICwgZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG4gIH07XG4gIGRlbGV0ZUFsbFRvZ2dsZXMoaWROdW1iZXI6IG51bWJlcikge1xuICAgIGxldCBzbGlkZXJTY2FsZUlkID0gXCIjc2xpZGVyX19zY2FsZS1cIiArIGlkTnVtYmVyO1xuICAgIGxldCBzbGlkZXJQYXJlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNsaWRlclNjYWxlSWQpO1xuXG4gICAgZm9yIChsZXQgaSA9IHNsaWRlclBhcmVudC5jaGlsZHJlbi5sZW5ndGg7IGkgPiAxOyBpLS0pIHtcbiAgICAgIHRoaXMuZGVsZXRlVG9nZ2xlKGlkTnVtYmVyLCBpLCB0cnVlKTtcbiAgICB9XG4gIH07XG4gIGRlbGV0ZVRvZ2dsZShpZE51bWJlcjogbnVtYmVyIHwgc3RyaW5nLCBwb3N0Zml4OiBudW1iZXIsIGlzQWxsOiBib29sZWFuID0gZmFsc2UpIHtcblxuICAgIGxldCBoYW5kbGVDb250cm9sQ29udGFpbmVySWQgPSBcIiNzbGlkZXJfX2hhbmRsZUNvbnRyb2xDb250YWluZXItXCIgKyBpZE51bWJlcjtcbiAgICBsZXQgc2xpZGVyU2NhbGVJZCA9IFwiI3NsaWRlcl9fc2NhbGUtXCIgKyBpZE51bWJlcjtcblxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2xpZGVyU2NhbGVJZCkuY2hpbGRyZW5bcG9zdGZpeC0xXS5yZW1vdmUoKTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGhhbmRsZUNvbnRyb2xDb250YWluZXJJZCkuY2hpbGRyZW5bcG9zdGZpeC0xXS5yZW1vdmUoKTtcblxuICAgIGlmIChwb3N0Zml4IDwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzbGlkZXJTY2FsZUlkKS5jaGlsZHJlbi5sZW5ndGggKyAxICYmICFpc0FsbCl7XG4gICAgICB0aGlzLmNoYW5nZVBvc3RmaXhlcyggc2xpZGVyU2NhbGVJZCwgJ3NsaWRlcl9fdG9nZ2xlJywgcG9zdGZpeCk7XG4gICAgICB0aGlzLmNoYW5nZVBvc3RmaXhlcyggaGFuZGxlQ29udHJvbENvbnRhaW5lcklkLCAnc2xpZGVyX190b2dnbGVDb250cm9sJywgcG9zdGZpeCk7XG4gICAgfVxuICB9O1xuICBjaGFuZGVUb2dnbGVQb3NpdGlvbihuZXdDb29yZDogbnVtYmVyIHwgc3RyaW5nLCBzY2FsZTogSFRNTEVsZW1lbnQsIHRvZ2dsZTogSFRNTEVsZW1lbnQpIHtcblxuICAgIGxldCBzY2FsZVNpemUgPSBzY2FsZS5vZmZzZXRXaWR0aDtcbiAgICBsZXQgdG9nZ2xlU2l6ZSA9IHRvZ2dsZS5vZmZzZXRXaWR0aDtcblxuICAgIGlmICh0b2dnbGUuY2xhc3NMaXN0LmNvbnRhaW5zKFwidmVydGljYWxcIikpIHtcbiAgICAgIHNjYWxlU2l6ZSA9IHNjYWxlLm9mZnNldEhlaWdodDtcbiAgICAgIHRvZ2dsZVNpemUgPSB0b2dnbGUub2Zmc2V0SGVpZ2h0O1xuICAgIH1cbiAgICBcbiAgICBsZXQgdG9nZ2xlTmV3UG9zaXRpb24gPSAoICgrbmV3Q29vcmQgLSB0aGlzLnNsaWRlckluZm8ubWluKSAqIChzY2FsZVNpemUgLSB0b2dnbGVTaXplKSApIC8gKCB0aGlzLnNsaWRlckluZm8ubWF4IC0gdGhpcy5zbGlkZXJJbmZvLm1pbiApO1xuXG4gICAgaWYgKHRvZ2dsZU5ld1Bvc2l0aW9uID4gc2NhbGVTaXplIC0gdG9nZ2xlU2l6ZSAvIDIpe1xuICAgICAgdG9nZ2xlTmV3UG9zaXRpb24gPSBzY2FsZVNpemUgLSB0b2dnbGVTaXplIC8gMjtcbiAgICAgIG5ld0Nvb3JkID0gdGhpcy5zbGlkZXJJbmZvLm1heDtcbiAgICB9XG4gICAgaWYgKHRvZ2dsZU5ld1Bvc2l0aW9uIDwgMCkge1xuICAgICAgdG9nZ2xlTmV3UG9zaXRpb24gPSAwO1xuICAgICAgbmV3Q29vcmQgPSB0aGlzLnNsaWRlckluZm8ubWluO1xuICAgIH1cblxuICAgIGlmICh0b2dnbGUuY2xhc3NMaXN0LmNvbnRhaW5zKFwidmVydGljYWxcIikpIHtcbiAgICAgIHRvZ2dsZS5zdHlsZS50b3AgPSB0b2dnbGVOZXdQb3NpdGlvbiArIFwicHhcIlxuICAgIH0gZWxzZSB7XG4gICAgICB0b2dnbGUuc3R5bGUubGVmdCA9IHRvZ2dsZU5ld1Bvc2l0aW9uICsgXCJweFwiO1xuICAgIH1cbiAgICB0b2dnbGUuZmlyc3RFbGVtZW50Q2hpbGQudGV4dENvbnRlbnQgPSBcIlwiICsgbmV3Q29vcmQ7XG4gIH1cblxuICBjaGFuZ2VQb3N0Zml4ZXMocGFyZW50SWQ6IHN0cmluZywgY2xhc3NOYW1lOiBzdHJpbmcsIGRlbGV0ZWRQb3N0Zml4OiBudW1iZXIpIHtcblxuICAgIGxldCBuZXdQb3N0Zml4ID0gZGVsZXRlZFBvc3RmaXggLSAxO1xuICAgIGxldCBwYXJlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBhcmVudElkKTtcblxuICAgIGZvciAobGV0IGkgPSBuZXdQb3N0Zml4OyBpIDwgcGFyZW50LmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICBsZXQgdGhpc0NoaWxkID0gcGFyZW50LmNoaWxkcmVuW2ldO1xuICAgICAgbGV0IFssIGlkTnVtLCBwb3N0Zl0gPSB0aGlzQ2hpbGQuaWQuc3BsaXQoXCItXCIpO1xuICAgICAgbGV0IG5ld1Bvc3RmID0gK3Bvc3RmIC0gMTtcbiAgICAgIGxldCBuZXdJZCA9IFwiI1wiICsgY2xhc3NOYW1lICsgJy0nICsgaWROdW0gKyAnLScgKyBuZXdQb3N0ZjtcbiAgICAgIHRoaXNDaGlsZC5pZCA9IG5ld0lkO1xuXG4gICAgICBpZiAodGhpc0NoaWxkLmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzQ2hpbGQuY2hpbGRyZW4ubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICBsZXQgW2NoaWxkQ2xhc3NOYW1lLCAsIF0gPSB0aGlzQ2hpbGQuY2hpbGRyZW5bal0uaWQuc3BsaXQoXCItXCIpO1xuICAgICAgICAgIG5ld0lkID0gY2hpbGRDbGFzc05hbWUgKyAnLScgKyBpZE51bSArICctJyArIG5ld1Bvc3RmO1xuICAgICAgICAgIHRoaXNDaGlsZC5jaGlsZHJlbltqXS5pZCA9IG5ld0lkO1xuXG4gICAgICAgICAgaWYgKHRoaXNDaGlsZC5jaGlsZHJlbltqXS50YWdOYW1lID09PSBcIkxBQkxFXCIpIHtcbiAgICAgICAgICAgIGxldCBsYWJsZUVsZW1lbnQgPSB0aGlzQ2hpbGQuY2hpbGRyZW5bal07XG4gICAgICAgICAgICBsZXQgYXR0ckZvciA9IGxhYmxlRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2ZvcicpO1xuICAgICAgICAgICAgbGV0IFtmb3JDbGFzcywgLF0gPSBhdHRyRm9yLnNwbGl0KFwiLVwiKTtcbiAgICAgICAgICAgIGF0dHJGb3IgPSBmb3JDbGFzcyArICctJyArIGlkTnVtICsgJy0nICsgbmV3UG9zdGY7XG4gICAgICAgICAgICBsYWJsZUVsZW1lbnQuc2V0QXR0cmlidXRlKCdmb3InLCBhdHRyRm9yKTtcbiAgICAgICAgICAgIGxhYmxlRWxlbWVudC5pbm5lckhUTUwgPSBuZXdQb3N0ZiArIFwiOiBcIjtcbiAgICAgICAgICB9XG4gICAgICAgIH0gICAgIFxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm47XG4gIH07XG4gXG4gIHJvdGF0ZVNjYWxlVmVydGljYWwgKGNvbnRhaW5lcklkOiBzdHJpbmcpIHtcbiAgICBsZXQgc2VhcmNoQ29udGFpbmVySWQ6IHN0cmluZyA9IGNvbnRhaW5lcklkO1xuXG4gICAgaWYgKCFjb250YWluZXJJZC5pbmNsdWRlcyhcIiNcIikpIHtcbiAgICAgIHNlYXJjaENvbnRhaW5lcklkID0gJyMnICsgY29udGFpbmVySWQ7XG4gICAgfVxuICAgIGlmICghKCQoc2VhcmNoQ29udGFpbmVySWQpLmhhc0NsYXNzKFwidmVydGljYWxcIikpKSB7XG4gICAgICAkKHNlYXJjaENvbnRhaW5lcklkKS5hZGRDbGFzcyhcInZlcnRpY2FsXCIpO1xuICAgICAgJChzZWFyY2hDb250YWluZXJJZCkuY2hpbGRyZW4oXCIuc2xpZGVyX19zY2FsZVwiKS5hZGRDbGFzcyhcInZlcnRpY2FsXCIpO1xuICAgICAgbGV0IGhhbmRsZXMgPSAkKHNlYXJjaENvbnRhaW5lcklkKS5jaGlsZHJlbihcIi5zbGlkZXJfX3NjYWxlXCIpLmNoaWxkcmVuKFwiLnNsaWRlcl9fdG9nZ2xlXCIpO1xuXG4gICAgICBmb3IgKGxldCBoYW5kbGUgb2YgaGFuZGxlcykge1xuICAgICAgICBoYW5kbGUuY2xhc3NMaXN0LmFkZChcInZlcnRpY2FsXCIpO1xuICAgICAgICBsZXQgb2xkTGVmdCA9IGhhbmRsZS5zdHlsZS5sZWZ0O1xuICAgICAgICBoYW5kbGUuc3R5bGUubGVmdCA9IC00ICsgXCJweFwiO1xuICAgICAgICBoYW5kbGUuc3R5bGUudG9wID0gb2xkTGVmdDtcbiAgICAgICAgbGV0IGxhYmxlID0gaGFuZGxlLmZpcnN0RWxlbWVudENoaWxkO1xuICAgICAgICBsYWJsZS5jbGFzc0xpc3QuYWRkKFwidmVydGljYWxcIik7XG4gICAgICB9XG4gICAgfVxuICB9O1xuICByb3RhdGVTY2FsZUhvcmlzb250YWwoY29udGFpbmVySWQ6IHN0cmluZykge1xuICAgIGxldCBzZWFyY2hDb250YWluZXJJZDogc3RyaW5nID0gY29udGFpbmVySWQ7XG5cbiAgICBpZiAoIWNvbnRhaW5lcklkLmluY2x1ZGVzKFwiI1wiKSkge1xuICAgICAgc2VhcmNoQ29udGFpbmVySWQgPSAnIycgKyBjb250YWluZXJJZDtcbiAgICB9IFxuXG4gICAgaWYgKCQoc2VhcmNoQ29udGFpbmVySWQpLmhhc0NsYXNzKFwidmVydGljYWxcIikpIHtcbiAgICAgICQoc2VhcmNoQ29udGFpbmVySWQpLnJlbW92ZUNsYXNzKFwidmVydGljYWxcIik7XG4gICAgICAkKHNlYXJjaENvbnRhaW5lcklkKS5jaGlsZHJlbihcIi5zbGlkZXJfX3NjYWxlXCIpLnJlbW92ZUNsYXNzKFwidmVydGljYWxcIik7XG4gICAgICBsZXQgaGFuZGxlcyA9ICQoc2VhcmNoQ29udGFpbmVySWQpLmNoaWxkcmVuKFwiLnNsaWRlcl9fc2NhbGVcIikuY2hpbGRyZW4oXCIuc2xpZGVyX190b2dnbGVcIik7XG5cbiAgICAgIGZvciAobGV0IGhhbmRsZSBvZiBoYW5kbGVzKSB7XG4gICAgICAgIGhhbmRsZS5jbGFzc0xpc3QucmVtb3ZlKFwidmVydGljYWxcIik7XG4gICAgICAgIGxldCBvbGRUb3AgPSBoYW5kbGUuc3R5bGUudG9wO1xuICAgICAgICBoYW5kbGUuc3R5bGUudG9wID0gLTUgKyBcInB4XCI7XG4gICAgICAgIGhhbmRsZS5zdHlsZS5sZWZ0ID0gb2xkVG9wO1xuICAgICAgICBsZXQgbGFibGUgPSBoYW5kbGUuZmlyc3RFbGVtZW50Q2hpbGQ7XG4gICAgICAgIGxhYmxlLmNsYXNzTGlzdC5yZW1vdmUoXCJ2ZXJ0aWNhbFwiKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgfTtcblxuICBzaG93VG9nZ2xlTGFibGVzKGlkTnVtOiBudW1iZXIsIGlzVG9TaG93OiBib29sZWFuKSB7XG5cbiAgICBsZXQgcGFyZW50U2xpZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNzbGlkZXJfX3NjYWxlLVwiICsgaWROdW0pO1xuICAgIGxldCBoYW5kbGVzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwocGFyZW50U2xpZGVyLmNoaWxkcmVuKTtcblxuICAgIGZvciAobGV0IGl0ZW0gb2YgaGFuZGxlcykge1xuICAgICAgaWYgKGlzVG9TaG93KSB7XG4gICAgICAgIGlmIChpdGVtLmZpcnN0RWxlbWVudENoaWxkLmNsYXNzTGlzdC5jb250YWlucyhcImhpZGRlblwiKSl7XG4gICAgICAgICAgaXRlbS5maXJzdEVsZW1lbnRDaGlsZC5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZGVuXCIpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKCFpdGVtLmZpcnN0RWxlbWVudENoaWxkLmNsYXNzTGlzdC5jb250YWlucyhcImhpZGRlblwiKSkge1xuICAgICAgICBpdGVtLmZpcnN0RWxlbWVudENoaWxkLmNsYXNzTGlzdC5hZGQoXCJoaWRkZW5cIik7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG59O1xuXG4vLyAgIHJlbmV3U2NhbGUoaWROdW06IG51bWJlciwgbWluOiBudW1iZXIsIG1heDogbnVtYmVyLCBzdGVwOiBudW1iZXIpIHtcbi8vICAgICBsZXQgdGhhdCA9IHRoaXM7XG4vLyAgICAgdGhpcy5hZGRIYW5kbGVMaXN0ZW5lcihpZE51bSwgbWluLCBtYXgsIHN0ZXApO1xuLy8gICAgIGxldCBzY2FsZSA9IHRoaXMuZ2V0RWxlbWVudCgnJywgJ3NsaWRlcl9fc2NhbGUnLCBpZE51bSk7XG4vLyAgICAgbGV0IGhhbmRsZXMgPSBzY2FsZS5jaGlsZHJlbjtcbi8vICAgICBmb3IgKGxldCBoYW5kbGUgb2YgaGFuZGxlcykge1xuLy8gICAgICAgdGhpcy5hZGRIYW5kbGVMaXN0ZW5lci5iaW5kKGhhbmRsZSwgaWROdW0sIG1pbiwgbWF4LCBzdGVwKTtcbi8vICAgICB9XG4gICAgLy8gbGV0IG9sZFNsaWRlciA9IHRoaXMuZ2V0RWxlbWVudCgnJywgJ3NsaWRlcl9fbWFpbkNvbnRhaW5lcicsIGlkTnVtKTtcbiAgICAvLyBsZXQgbmV3U2xpZGVyID0gdGhpcy5jcmVhdGVTbGlkZXJJbnRlcmZhY2UoaWROdW0pO1xuICAgIC8vIGxldCBwcmV2U2libGluZyA9IG9sZFNsaWRlci5wcmV2aW91c0VsZW1lbnRTaWJsaW5nO1xuICAgIC8vIGlmIChwcmV2U2libGluZykge1xuICAgIC8vICAgb2xkU2xpZGVyLnJlbW92ZSgpO1xuICAgIC8vICAgcHJldlNpYmxpbmcuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KFwiYWZ0ZXJlbmRcIiwgbmV3U2xpZGVyKTtcbiAgICAvLyB9IGVsc2Uge1xuICAgIC8vICAgbGV0IHBhcmVudEVsZW1lbnQgPSBvbGRTbGlkZXIucGFyZW50RWxlbWVudDsgXG4gICAgLy8gICBvbGRTbGlkZXIucmVtb3ZlKCk7XG4gICAgLy8gICBwYXJlbnRFbGVtZW50LnByZXBlbmQobmV3U2xpZGVyKTtcbiAgICAvLyB9XG4vLyAgIH1cblxuY29uc3QgbmV3TW9kZWwgPSBuZXcgTW9kZWwoKTtcbmNvbnNvbGUubG9nKG5ld01vZGVsKTtcbmNvbnN0IG5ld1ZpZXcgPSBuZXcgVmlldyhuZXdNb2RlbCk7XG5jb25zb2xlLmxvZyhuZXdWaWV3KTtcbmNvbnN0IGFwcCA9IG5ldyBDb250cm9sbGVyKG5ld01vZGVsLCBuZXdWaWV3KTsgXG5cbiIsInZhciBhcGkgPSByZXF1aXJlKFwiIS4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qc1wiKTtcbiAgICAgICAgICAgIHZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi4vbm9kZV9tb2R1bGVzL21pbmktY3NzLWV4dHJhY3QtcGx1Z2luL2Rpc3QvbG9hZGVyLmpzIS4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzPz9yZWYtLTUtMiEuLi9ub2RlX21vZHVsZXMvcG9zdGNzcy1sb2FkZXIvc3JjL2luZGV4LmpzPz9yZWYtLTUtMyEuL2luZGV4LmNzc1wiKTtcblxuICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQuX19lc01vZHVsZSA/IGNvbnRlbnQuZGVmYXVsdCA6IGNvbnRlbnQ7XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuICAgICAgICAgICAgfVxuXG52YXIgb3B0aW9ucyA9IHt9O1xuXG5vcHRpb25zLmluc2VydCA9IFwiaGVhZFwiO1xub3B0aW9ucy5zaW5nbGV0b24gPSBmYWxzZTtcblxudmFyIHVwZGF0ZSA9IGFwaShjb250ZW50LCBvcHRpb25zKTtcblxudmFyIGV4cG9ydGVkID0gY29udGVudC5sb2NhbHMgPyBjb250ZW50LmxvY2FscyA6IHt9O1xuXG5cblxubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRlZDsiXSwic291cmNlUm9vdCI6IiJ9